<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HKDSE Past Paper è³‡æºåº« | Untrammeled</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0,0,0,0.06); }
        .breadcrumb-item:after { content: '>'; margin: 0 10px; color: #94a3b8; font-size: 0.8rem; }
        .breadcrumb-item:last-child:after { content: ''; }
        
        /* PDF é¢„è§ˆæ¨¡æ€æ¡† */
        .pdf-modal { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(4px); }
        
        /* åé¦ˆæ¨¡æ€æ¡† */
        .feedback-modal { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(8px); }
        .slide-up { animation: slideUp 0.3s ease-out; }
        
        /* ç™»å½•/æ³¨å†Œæ¨¡æ€æ¡† */
        .auth-modal { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(8px); }
        
        /* ç®¡ç†å‘˜é¢æ¿ */
        .admin-panel { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(8px); }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* è¡¨æ ¼æ ·å¼ */
        .table-container {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .table-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .table-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        
        .table-container::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        .table-container::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* é‚€è¯·ç è¾“å…¥æ ·å¼ */
        .invite-code-input {
            letter-spacing: 0.2em;
            font-weight: bold;
            font-family: monospace;
        }
        
        .invite-code-required {
            border-left: 4px solid #f59e0b;
            background-color: #fffbeb;
        }
    </style>
</head>
<body class="bg-[#f8fafc] min-h-screen pb-20">
    <div id="app" class="max-w-6xl mx-auto px-4 py-8">
        <!-- é¡¶éƒ¨æ  -->
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
            <div class="mb-4 md:mb-0">
                <h1 class="text-3xl font-black text-slate-800 tracking-tight">DSE Resource Hub</h1>
                <p class="text-slate-400 text-sm mt-1 font-medium">Untrammeled's Past Paper Library</p>
            </div>
            <div class="flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-4">
                <span class="bg-blue-50 text-blue-600 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider inline-block w-fit">Public Archive</span>
                
                <!-- ç”¨æˆ·çŠ¶æ€æ˜¾ç¤º -->
                <div class="flex items-center space-x-4">
                    <div v-if="currentUser" class="flex items-center space-x-3">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center text-white text-sm font-bold">
                                {{ currentUser.username.charAt(0).toUpperCase() }}
                            </div>
                            <span class="ml-2 text-slate-700 font-medium">{{ currentUser.username }}</span>
                        </div>
                        <button v-if="currentUser.role === 'admin'" @click="openAdminPanel" 
                                class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-all shadow-sm hover:shadow-md flex items-center">
                            <i class="fas fa-cog mr-2"></i>
                            ç®¡ç†é¢æ¿
                        </button>
                        <button @click="logout" 
                                class="bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 text-white px-4 py-2 rounded-xl text-sm font-bold transition-all shadow-sm hover:shadow-md flex items-center">
                            <i class="fas fa-sign-out-alt mr-2"></i>
                            ç™»å‡º
                        </button>
                    </div>
                    <div v-else class="flex space-x-3">
                        <button @click="openLoginForm" 
                                class="bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-all shadow-sm hover:shadow-md flex items-center">
                            <i class="fas fa-sign-in-alt mr-2"></i>
                            ç™»å½•
                        </button>
                    </div>
                    
                    <!-- åé¦ˆæŒ‰é’® -->
                    <button @click="showFeedbackForm" 
                            class="bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-all shadow-sm hover:shadow-md flex items-center">
                        <i class="fas fa-comment-medical mr-2"></i>
                        å ±å‘Šç¼ºå¤±è©¦å·
                    </button>
                </div>
            </div>
        </header>

        <!-- é¢åŒ…å±‘å¯¼èˆª -->
        <nav class="flex items-center mb-6 px-2 overflow-x-auto whitespace-nowrap pb-2">
            <button @click="goHome" class="flex items-center text-blue-600 hover:text-blue-800 transition flex-shrink-0">
                <i class="fas fa-home mr-2"></i>
                <span class="font-bold">Home</span>
            </button>
            <div v-for="(crumb, index) in breadcrumbs" :key="index" class="breadcrumb-item flex items-center flex-shrink-0">
                <button @click="jumpTo(index)" class="text-slate-500 hover:text-blue-600 font-medium transition">{{ crumb }}</button>
            </div>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div v-if="!currentUser && !showPublicMessage" class="text-center py-20 bg-white rounded-3xl border border-slate-200">
            <div class="max-w-md mx-auto">
                <i class="fas fa-lock text-slate-300 text-6xl mb-6"></i>
                <h2 class="text-2xl font-bold text-slate-700 mb-4">æ­¡è¿ä½¿ç”¨ DSE è³‡æºåº«</h2>
                <p class="text-slate-500 mb-8">è«‹ç™»éŒ„ä»¥ç€è¦½æ‰€æœ‰è³‡æºï¼Œæˆ–ä½¿ç”¨å…¬å…±ç€è¦½åŠŸèƒ½</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button @click="openLoginForm" 
                            class="bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white px-6 py-3 rounded-xl font-bold transition-all shadow-sm hover:shadow-md">
                        ç«‹å³ç™»éŒ„
                    </button>
                </div>
            </div>
        </div>

        <!-- æ–‡ä»¶æµè§ˆåŒºåŸŸ -->
        <div v-if="currentUser || showPublicMessage">
            <div v-if="Object.keys(currentMenu).length > (currentMenu._files ? 1 : 0)" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
                <div v-for="(value, key) in currentMenu" v-show="key !== '_files'" 
                     @click="enterDir(key)"
                     class="card-hover cursor-pointer bg-white p-6 rounded-2xl border border-slate-100 flex items-center justify-between transition-all group">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 bg-slate-50 group-hover:bg-blue-50 text-slate-400 group-hover:text-blue-500 rounded-xl flex items-center justify-center transition-colors">
                            <i class="fas fa-folder text-xl"></i>
                        </div>
                        <div>
                            <span class="font-bold text-slate-700 text-lg block leading-tight">{{ key }}</span>
                            <span class="text-slate-400 text-xs mt-1">Click to view items</span>
                        </div>
                    </div>
                    <i class="fas fa-arrow-right text-slate-200 group-hover:text-blue-300 transition-colors"></i>
                </div>
            </div>

            <!-- æ–‡ä»¶åˆ—è¡¨ -->
            <div v-if="currentMenu._files" class="mt-8">
                <div class="bg-white rounded-3xl shadow-sm border border-slate-100 overflow-hidden">
                    <div class="px-6 py-4 bg-slate-50 border-b border-slate-100 flex justify-between items-center">
                        <span class="font-bold text-slate-500 uppercase text-xs tracking-widest">Available PDF Documents</span>
                        <span class="text-slate-400 text-xs">{{ currentMenu._files.length }} Files</span>
                    </div>
                    <div class="divide-y divide-slate-50">
                        <div v-for="file in currentMenu._files" @click="viewPdf(file)"
                           class="flex items-center justify-between p-5 hover:bg-blue-50/50 group transition-all cursor-pointer">
                            <div class="flex items-center pr-4">
                                <div class="w-10 h-10 flex items-center justify-center text-red-500 bg-red-50 rounded-lg mr-4 group-hover:scale-110 transition-transform">
                                    <i class="fas fa-file-pdf text-lg"></i>
                                </div>
                                <div>
                                    <span class="text-slate-700 group-hover:text-blue-700 font-semibold block transition-colors">
                                        {{ formatFileName(file) }}
                                    </span>
                                    <span class="text-slate-400 text-xs">PDF Document</span>
                                </div>
                            </div>
                            <div class="flex items-center text-blue-500 font-bold text-xs bg-white px-4 py-2 rounded-full border border-slate-100 shadow-sm group-hover:bg-blue-600 group-hover:text-white transition-all">
                                VIEW <i class="fas fa-eye ml-2"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç©ºæ–‡ä»¶å¤¹æç¤º -->
            <div v-if="Object.keys(currentMenu).length === 0" class="text-center py-20 bg-white rounded-3xl border border-dashed border-slate-200">
                <i class="fas fa-inbox text-slate-200 text-5xl mb-4"></i>
                <p class="text-slate-400">This folder is empty.</p>
            </div>
            
            <!-- å…¬å…±æµè§ˆæç¤º -->
            <div v-if="showPublicMessage" class="mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-6">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <i class="fas fa-info-circle text-blue-500 text-2xl"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-semibold text-blue-800">å…¬å…±ç€è¦½æ¨¡å¼</h3>
                        <p class="text-blue-600 mt-1">æ‚¨æ­£åœ¨ä½¿ç”¨å…¬å…±ç€è¦½åŠŸèƒ½ï¼Œéƒ¨åˆ†é«˜ç´šåŠŸèƒ½å¯èƒ½ç„¡æ³•ä½¿ç”¨ã€‚å»ºè­°æ‚¨<a href="javascript:void(0)" @click="openLoginForm" class="font-bold underline hover:text-blue-800">ç™»éŒ„å¸³æˆ¶</a>ä»¥ç²å¾—å®Œæ•´é«”é©—ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- PDF é¢„è§ˆæ¨¡æ€æ¡† -->
        <div v-if="pdfUrl" class="pdf-modal fixed inset-0 z-[100] flex flex-col">
            <div class="flex items-center justify-between p-4 text-white">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-file-pdf text-red-500 text-xl"></i>
                    <span class="font-bold tracking-tight">{{ viewingFileName }}</span>
                </div>
                <button @click="closePdf" class="w-10 h-10 rounded-full bg-white/10 hover:bg-red-500 transition-colors flex items-center justify-center text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="flex-grow bg-white m-2 md:m-4 rounded-xl overflow-hidden shadow-2xl">
                <iframe :src="pdfUrl" class="w-full h-full border-none"></iframe>
            </div>
        </div>

        <!-- ç™»å½•æ¨¡æ€æ¡† -->
        <div v-if="showLogin" class="auth-modal fixed inset-0 z-[300] flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md slide-up">
                <div class="sticky top-0 bg-white border-b border-slate-100 px-6 py-4 flex items-center justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800">ç™»éŒ„å¸³æˆ¶</h3>
                        <p class="text-slate-500 text-sm mt-1">è¨ªå•å®Œæ•´è³‡æºåº«</p>
                    </div>
                    <button @click="closeAuthModal" class="w-8 h-8 rounded-full hover:bg-slate-100 flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-slate-400"></i>
                    </button>
                </div>

                <div class="p-6 space-y-6">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ç”¨æˆ¶å <span class="text-red-500">*</span>
                        </label>
                        <input type="text" v-model="loginForm.username" 
                               placeholder="è¼¸å…¥ç”¨æˆ¶å"
                               class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            å¯†ç¢¼ <span class="text-red-500">*</span>
                        </label>
                        <input type="password" v-model="loginForm.password" 
                               placeholder="è¼¸å…¥å¯†ç¢¼"
                               class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>

                    <div class="flex items-center justify-between">
                        <label class="flex items-center">
                            <input type="checkbox" v-model="loginForm.remember" 
                                   class="h-4 w-4 text-blue-600 border-slate-300 rounded">
                            <span class="ml-2 text-slate-700 text-sm">è¨˜ä½æˆ‘</span>
                        </label>
                        <button @click="openRegisterForm" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                            é‚„æ²’æœ‰å¸³æˆ¶ï¼Ÿç«‹å³è¨»å†Š
                        </button>
                    </div>

                    <div class="pt-2">
                        <button @click="login" 
                                :disabled="!loginForm.username || !loginForm.password"
                                :class="(!loginForm.username || !loginForm.password) ? 'bg-slate-300 cursor-not-allowed' : 'bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600'"
                                class="w-full text-white px-8 py-3 rounded-xl font-bold transition-all shadow-sm hover:shadow-md flex items-center justify-center">
                            <i class="fas fa-sign-in-alt mr-2"></i>
                            ç™»éŒ„
                        </button>
                    </div>
                    
                    <!-- é»˜è®¤ç®¡ç†å‘˜è´¦å·æç¤º -->
                    
                </div>
            </div>
        </div>

        <!-- æ³¨å†Œæ¨¡æ€æ¡† -->
        <div v-if="showRegister" class="auth-modal fixed inset-0 z-[300] flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md slide-up">
                <div class="sticky top-0 bg-white border-b border-slate-100 px-6 py-4 flex items-center justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800">è¨»å†Šæ–°å¸³æˆ¶</h3>
                        <p class="text-slate-500 text-sm mt-1">å¿…é ˆä½¿ç”¨é‚€è«‹ç¢¼æ‰èƒ½è¨»å†Š</p>
                    </div>
                    <button @click="closeAuthModal" class="w-8 h-8 rounded-full hover:bg-slate-100 flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-slate-400"></i>
                    </button>
                </div>

                <div class="p-6 space-y-6">
                    <!-- é‚€è¯·ç è¯´æ˜ -->
                    <div class="invite-code-required p-4 rounded-lg">
                        <div class="flex items-start">
                            <i class="fas fa-key text-yellow-500 mt-1 mr-3"></i>
                            <div>
                                <h4 class="font-bold text-yellow-700 mb-1">å¿…é ˆä½¿ç”¨é‚€è«‹ç¢¼</h4>
                                <p class="text-yellow-600 text-sm">æœ¬ç³»çµ±æ¡ç”¨é‚€è«‹åˆ¶è¨»å†Šã€‚è«‹å‘ç®¡ç†å“¡ç´¢å–æœ‰æ•ˆçš„é‚€è«‹ç¢¼ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            é‚€è«‹ç¢¼ <span class="text-red-500">*</span>
                        </label>
                        <input type="text" v-model="registerForm.inviteCode" 
                               placeholder="è¼¸å…¥8ä½é‚€è«‹ç¢¼ï¼ˆä¾‹å¦‚ï¼šA1B2C3D4ï¼‰"
                               class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all invite-code-input"
                               maxlength="8"
                               style="letter-spacing: 0.2em;">
                        <p class="text-slate-400 text-xs mt-1">é‚€è«‹ç¢¼é€šå¸¸ç‚º8ä½å¤§å¯«å­—æ¯å’Œæ•¸å­—çš„çµ„åˆ</p>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ç”¨æˆ¶å <span class="text-red-500">*</span>
                        </label>
                        <input type="text" v-model="registerForm.username" 
                               placeholder="è¼¸å…¥ç”¨æˆ¶åï¼ˆè‡³å°‘3å€‹å­—ç¬¦ï¼‰"
                               class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            å¯†ç¢¼ <span class="text-red-500">*</span>
                        </label>
                        <input type="password" v-model="registerForm.password" 
                               placeholder="è¼¸å…¥å¯†ç¢¼ï¼ˆè‡³å°‘6å€‹å­—ç¬¦ï¼‰"
                               class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ç¢ºèªå¯†ç¢¼ <span class="text-red-500">*</span>
                        </label>
                        <input type="password" v-model="registerForm.confirmPassword" 
                               placeholder="å†æ¬¡è¼¸å…¥å¯†ç¢¼"
                               class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>

                    <div class="pt-2">
                        <button @click="register" 
                                :disabled="!canRegister"
                                :class="!canRegister ? 'bg-slate-300 cursor-not-allowed' : 'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600'"
                                class="w-full text-white px-8 py-3 rounded-xl font-bold transition-all shadow-sm hover:shadow-md flex items-center justify-center">
                            <i class="fas fa-user-plus mr-2"></i>
                            è¨»å†Šå¸³æˆ¶
                        </button>
                    </div>
                    
                    <div class="text-center">
                        <button @click="openLoginForm" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                            å·²æœ‰å¸³æˆ¶ï¼Ÿç«‹å³ç™»éŒ„
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åé¦ˆè¡¨æ ¼æ¨¡æ€æ¡† -->
        <div v-if="showFeedback" class="feedback-modal fixed inset-0 z-[200] flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto slide-up">
                <!-- å¤´éƒ¨ -->
                <div class="sticky top-0 bg-white border-b border-slate-100 px-6 py-4 flex items-center justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800">ğŸ“ å ±å‘Šç¼ºå¤±è©¦å·</h3>
                        <p class="text-slate-500 text-sm mt-1">å¹«åŠ©æˆ‘å€‘å®Œå–„è³‡æºåº«</p>
                    </div>
                    <button @click="closeFeedbackForm" class="w-8 h-8 rounded-full hover:bg-slate-100 flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-slate-400"></i>
                    </button>
                </div>

                <!-- è¡¨å•å†…å®¹ -->
                <div class="p-6 space-y-6">
                    <!-- ç§‘ç›®é€‰æ‹© -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ç§‘ç›® <span class="text-red-500">*</span>
                        </label>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                            <button v-for="subject in ['Chinese', 'English', 'Math', 'LS', 'Phy', 'Chem', 'Bio', 'Econ', 'Geog', 'Hist', 'BAFS', 'ICT']"
                                    :key="subject"
                                    @click="feedback.subject = subject"
                                    :class="feedback.subject === subject 
                                            ? 'bg-blue-100 border-blue-500 text-blue-700' 
                                            : 'bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100'"
                                    class="border rounded-lg py-3 px-4 text-sm font-medium transition-all text-center">
                                {{ subject }}
                            </button>
                        </div>
                    </div>

                    <!-- å¹´ä»½é€‰æ‹© -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            å¹´ä»½ <span class="text-red-500">*</span>
                        </label>
                        <div class="flex flex-wrap gap-2">
                            <button v-for="year in [2024, 2023, 2022, 2021, 2020, 2019, 2018, 2017, 2016, 2015, 2014, 2013, 2012, 'PP', 'SP']"
                                    :key="year"
                                    @click="feedback.year = year"
                                    :class="feedback.year === year 
                                            ? 'bg-blue-100 border-blue-500 text-blue-700' 
                                            : 'bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100'"
                                    class="border rounded-lg py-2 px-4 text-sm font-medium transition-all">
                                    {{ year }}
                            </button>
                        </div>
                    </div>

                    <!-- è¯•å·éƒ¨åˆ†é€‰æ‹© -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ç¼ºå¤±çš„è©¦å·éƒ¨åˆ† <span class="text-red-500">*</span>
                        </label>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                            <div v-for="paper in ['Paper 1', 'Paper 2', 'Paper 3', 'Paper 4', 'Paper 5', 'Answer Key', 'Marking Scheme']"
                                 :key="paper"
                                 class="flex items-center">
                                <input :id="'paper-' + paper" 
                                       type="checkbox" 
                                       :value="paper"
                                       v-model="feedback.missingPapers"
                                       class="h-4 w-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500">
                                <label :for="'paper-' + paper" class="ml-2 text-slate-700 text-sm">
                                    {{ paper }}
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- è¯­è¨€ç‰ˆæœ¬ -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            èªè¨€ç‰ˆæœ¬
                        </label>
                        <div class="flex gap-4">
                            <label class="inline-flex items-center">
                                <input type="radio" v-model="feedback.language" value="ä¸­æ–‡ç‰ˆ" class="h-4 w-4 text-blue-600">
                                <span class="ml-2 text-slate-700 text-sm">ä¸­æ–‡ç‰ˆ</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" v-model="feedback.language" value="è‹±æ–‡ç‰ˆ" class="h-4 w-4 text-blue-600">
                                <span class="ml-2 text-slate-700 text-sm">è‹±æ–‡ç‰ˆ</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" v-model="feedback.language" value="both" class="h-4 w-4 text-blue-600">
                                <span class="ml-2 text-slate-700 text-sm">å…©è€…çš†æœ‰</span>
                            </label>
                        </div>
                    </div>

                    <!-- é¢å¤–è¯´æ˜ -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            è©³ç´°èªªæ˜
                        </label>
                        <textarea v-model="feedback.description" 
                                  placeholder="è«‹æä¾›æ›´å¤šç´°ç¯€ï¼Œä¾‹å¦‚ï¼šå…·é«”ç¼ºå¤±çš„å…§å®¹ã€æ–‡ä»¶æ ¼å¼å»ºè­°ç­‰..."
                                  class="w-full h-32 px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none"></textarea>
                    </div>

                    <!-- è”ç³»æ–¹å¼ -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            è¯ç¹«æ–¹å¼ï¼ˆå¯é¸ï¼‰
                        </label>
                        <input type="email" v-model="feedback.contact" 
                               placeholder="email@example.com"
                               class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                        <p class="text-slate-400 text-xs mt-1">åƒ…ç”¨æ–¼å¿…è¦æ™‚è¯ç¹«æ‚¨ï¼Œä¸æœƒå…¬é–‹é¡¯ç¤º</p>
                    </div>

                    <!-- æäº¤æŒ‰é’® -->
                    <div class="pt-4 border-t border-slate-100">
                        <div class="flex justify-between items-center">
                            <button @click="submitFeedback" 
                                    :disabled="!canSubmitFeedback"
                                    :class="canSubmitFeedback 
                                            ? 'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600' 
                                            : 'bg-slate-300 cursor-not-allowed'"
                                    class="text-white px-8 py-3 rounded-xl font-bold transition-all shadow-sm hover:shadow-md flex items-center">
                                <i class="fas fa-paper-plane mr-2"></i>
                                æäº¤å ±å‘Š
                            </button>
                            <button @click="resetFeedbackForm" class="text-slate-500 hover:text-slate-700 px-4 py-2 rounded-lg font-medium transition-colors">
                                é‡è¨­è¡¨å–®
                            </button>
                        </div>
                        <p class="text-slate-400 text-xs mt-4 text-center">
                            æäº¤å¾Œå°‡è·³è½‰åˆ° GitHub å‰µå»ºåé¥‹ Issueï¼Œæ‚¨çš„è²¢ç»å°‡å¹«åŠ©æ›´å¤šäººï¼
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç®¡ç†å‘˜é¢æ¿ -->
        <div v-if="showAdminPanel" class="admin-panel fixed inset-0 z-[400] flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden slide-up">
                <!-- å¤´éƒ¨ -->
                <div class="sticky top-0 bg-white border-b border-slate-100 px-6 py-4 flex items-center justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800">ç®¡ç†å“¡é¢æ¿</h3>
                        <p class="text-slate-500 text-sm mt-1">ç³»çµ±ç®¡ç†èˆ‡æ•¸æ“šæŸ¥çœ‹</p>
                    </div>
                    <button @click="closeAdminPanel" class="w-8 h-8 rounded-full hover:bg-slate-100 flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-slate-400"></i>
                    </button>
                </div>

                <!-- é€‰é¡¹å¡ -->
                <div class="border-b border-slate-100">
                    <div class="flex px-6">
                        <button @click="adminTab = 'users'" 
                                :class="adminTab === 'users' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-slate-500 hover:text-slate-700'"
                                class="px-4 py-3 font-medium transition-colors">
                            <i class="fas fa-users mr-2"></i>ç”¨æˆ¶ç®¡ç†
                        </button>
                        <button @click="adminTab = 'feedback'" 
                                :class="adminTab === 'feedback' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-slate-500 hover:text-slate-700'"
                                class="px-4 py-3 font-medium transition-colors">
                            <i class="fas fa-comments mr-2"></i>åé¥‹æ•¸æ“š
                        </button>
                        <button @click="adminTab = 'invites'" 
                                :class="adminTab === 'invites' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-slate-500 hover:text-slate-700'"
                                class="px-4 py-3 font-medium transition-colors">
                            <i class="fas fa-key mr-2"></i>é‚€è«‹ç¢¼ç®¡ç†
                        </button>
                    </div>
                </div>

                <!-- å†…å®¹åŒºåŸŸ -->
                <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 140px);">
                    <!-- ç”¨æˆ·ç®¡ç† -->
                    <div v-if="adminTab === 'users'" class="space-y-6">
                        <div class="flex justify-between items-center">
                            <h4 class="text-lg font-semibold text-slate-800">ç”¨æˆ¶åˆ—è¡¨</h4>
                            <button @click="showAddUserForm = true" 
                                    class="bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                <i class="fas fa-user-plus mr-2"></i>æ·»åŠ æ–°ç”¨æˆ¶
                            </button>
                        </div>

                        <!-- æ·»åŠ ç”¨æˆ·è¡¨å• -->
                        <div v-if="showAddUserForm" class="bg-slate-50 p-4 rounded-xl border border-slate-200">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 mb-2">ç”¨æˆ¶å</label>
                                    <input type="text" v-model="newUser.username" 
                                           placeholder="è¼¸å…¥ç”¨æˆ¶å"
                                           class="w-full px-3 py-2 border border-slate-200 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 mb-2">å¯†ç¢¼</label>
                                    <input type="password" v-model="newUser.password" 
                                           placeholder="è¼¸å…¥å¯†ç¢¼"
                                           class="w-full px-3 py-2 border border-slate-200 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 mb-2">è§’è‰²</label>
                                    <select v-model="newUser.role" class="w-full px-3 py-2 border border-slate-200 rounded-lg">
                                        <option value="user">æ™®é€šç”¨æˆ¶</option>
                                        <option value="admin">ç®¡ç†å“¡</option>
                                    </select>
                                </div>
                                <div class="flex items-end">
                                    <button @click="addNewUser" 
                                            :disabled="!newUser.username || !newUser.password"
                                            :class="(!newUser.username || !newUser.password) ? 'bg-slate-300 cursor-not-allowed' : 'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600'"
                                            class="w-full text-white px-4 py-2 rounded-lg font-medium transition-all">
                                        å‰µå»ºç”¨æˆ¶
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- ç”¨æˆ·è¡¨æ ¼ -->
                        <div class="table-container">
                            <table class="w-full">
                                <thead class="bg-slate-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">ç”¨æˆ¶å</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">è§’è‰²</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">è¨»å†Šæ™‚é–“</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">æœ€å¾Œç™»éŒ„</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-slate-100">
                                    <tr v-for="user in filteredUsers" :key="user.username">
                                        <td class="px-4 py-3">
                                            <div class="flex items-center">
                                                <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center text-white text-sm font-bold">
                                                    {{ user.username.charAt(0).toUpperCase() }}
                                                </div>
                                                <div class="ml-3">
                                                    <div class="font-medium text-slate-900">{{ user.username }}</div>
                                                    <div class="text-slate-500 text-xs">{{ user.email || 'ç„¡éƒµç®±' }}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-4 py-3">
                                            <span :class="user.role === 'admin' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800'"
                                                  class="px-2 py-1 rounded-full text-xs font-medium">
                                                {{ user.role === 'admin' ? 'ç®¡ç†å“¡' : 'æ™®é€šç”¨æˆ¶' }}
                                            </span>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-slate-600">
                                            {{ formatDate(user.createdAt) }}
                                        </td>
                                        <td class="px-4 py-3 text-sm text-slate-600">
                                            {{ user.lastLogin ? formatDate(user.lastLogin) : 'å¾æœªç™»éŒ„' }}
                                        </td>
                                        <td class="px-4 py-3">
                                            <div class="flex space-x-2">
                                                <button @click="editUser(user)" 
                                                        class="text-blue-600 hover:text-blue-800 text-sm">
                                                    ç·¨è¼¯
                                                </button>
                                                <button v-if="user.username !== currentUser.username" 
                                                        @click="deleteUser(user)"
                                                        class="text-red-600 hover:text-red-800 text-sm">
                                                    åˆªé™¤
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- ç”¨æˆ·ç»Ÿè®¡ -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                            <div class="bg-blue-50 p-4 rounded-xl border border-blue-200">
                                <div class="text-blue-800 font-bold text-2xl">{{ users.length }}</div>
                                <div class="text-blue-600 text-sm">ç¸½ç”¨æˆ¶æ•¸</div>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-xl border border-purple-200">
                                <div class="text-purple-800 font-bold text-2xl">{{ adminCount }}</div>
                                <div class="text-purple-600 text-sm">ç®¡ç†å“¡æ•¸</div>
                            </div>
                            <div class="bg-green-50 p-4 rounded-xl border border-green-200">
                                <div class="text-green-800 font-bold text-2xl">{{ activeUsers }}</div>
                                <div class="text-green-600 text-sm">æ´»èºç”¨æˆ¶</div>
                            </div>
                        </div>
                    </div>

                    <!-- åé¦ˆæ•°æ® -->
                    <div v-if="adminTab === 'feedback'" class="space-y-6">
                        <div class="flex justify-between items-center">
                            <h4 class="text-lg font-semibold text-slate-800">åé¥‹æ•¸æ“š</h4>
                            <div class="flex space-x-2">
                                <button @click="refreshFeedback" 
                                        class="bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                    <i class="fas fa-sync-alt mr-2"></i>åˆ·æ–°æ•¸æ“š
                                </button>
                                <button @click="openAllFeedback" 
                                        class="bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                    <i class="fab fa-github mr-2"></i>æŸ¥çœ‹æ‰€æœ‰Issue
                                </button>
                            </div>
                        </div>

                        <!-- åé¦ˆç»Ÿè®¡ -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="bg-orange-50 p-4 rounded-xl border border-orange-200">
                                <div class="text-orange-800 font-bold text-2xl">{{ feedbackStats.total }}</div>
                                <div class="text-orange-600 text-sm">ç¸½åé¥‹æ•¸</div>
                            </div>
                            <div class="bg-blue-50 p-4 rounded-xl border border-blue-200">
                                <div class="text-blue-800 font-bold text-2xl">{{ feedbackStats.recent }}</div>
                                <div class="text-blue-600 text-sm">è¿‘7å¤©</div>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-xl border border-purple-200">
                                <div class="text-purple-800 font-bold text-2xl">{{ mostCommonSubject }}</div>
                                <div class="text-purple-600 text-sm">ç†±é–€ç§‘ç›®</div>
                            </div>
                            <div class="bg-green-50 p-4 rounded-xl border border-green-200">
                                <div class="text-green-800 font-bold text-2xl">{{ feedbackStats.withContact || 0 }}</div>
                                <div class="text-green-600 text-sm">æœ‰è¯ç¹«æ–¹å¼</div>
                            </div>
                        </div>

                        <!-- åé¦ˆåˆ—è¡¨ -->
                        <div class="table-container">
                            <table class="w-full">
                                <thead class="bg-slate-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">ç§‘ç›®</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">å¹´ä»½</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">ç¼ºå¤±éƒ¨åˆ†</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">èªè¨€</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-slate-100">
                                    <tr v-for="item in feedbackList" :key="item.id">
                                        <td class="px-4 py-3">
                                            <span class="font-medium text-slate-900">{{ item.subject }}</span>
                                        </td>
                                        <td class="px-4 py-3">
                                            <span class="bg-slate-100 text-slate-700 px-2 py-1 rounded text-xs font-medium">
                                                {{ item.year }}
                                            </span>
                                        </td>
                                        <td class="px-4 py-3">
                                            <div class="flex flex-wrap gap-1">
                                                <span v-for="paper in item.missingPapers" :key="paper"
                                                      class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs">
                                                    {{ paper }}
                                                </span>
                                            </div>
                                        </td>
                                        <td class="px-4 py-3">
                                            <span class="text-slate-600 text-sm">{{ item.language || 'æœªæŒ‡å®š' }}</span>
                                        </td>
                                        <td class="px-4 py-3">
                                            <button @click="viewFeedbackDetail(item)" 
                                                    class="text-blue-600 hover:text-blue-800 text-sm">
                                                æŸ¥çœ‹è©³æƒ…
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- é‚€è¯·ç ç®¡ç† -->
                    <div v-if="adminTab === 'invites'" class="space-y-6">
                        <div class="flex justify-between items-center">
                            <h4 class="text-lg font-semibold text-slate-800">é‚€è«‹ç¢¼ç®¡ç†</h4>
                            <button @click="generateInviteCode" 
                                    class="bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                <i class="fas fa-plus-circle mr-2"></i>ç”Ÿæˆæ–°é‚€è«‹ç¢¼
                            </button>
                        </div>

                        <!-- å½“å‰é‚€è¯·ç  -->
                        <div class="bg-slate-50 p-4 rounded-xl border border-slate-200">
                            <h5 class="font-medium text-slate-700 mb-3">ç•¶å‰æœ‰æ•ˆçš„é‚€è«‹ç¢¼</h5>
                            <div v-if="inviteCodes.length === 0" class="text-center py-8">
                                <i class="fas fa-key text-slate-300 text-3xl mb-3"></i>
                                <p class="text-slate-400">æš«ç„¡é‚€è«‹ç¢¼</p>
                            </div>
                            <div v-else class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div v-for="code in inviteCodes" :key="code.code" 
                                     class="bg-white p-4 rounded-lg border border-slate-200">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <div class="font-mono text-lg font-bold text-slate-800">{{ code.code }}</div>
                                            <div class="text-slate-500 text-xs mt-1">
                                                å‰µå»ºæ™‚é–“ï¼š{{ formatDate(code.createdAt) }}
                                            </div>
                                        </div>
                                        <button @click="copyInviteCode(code.code)" 
                                                class="text-blue-600 hover:text-blue-800">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="text-sm">
                                        <span class="text-slate-600">ç”¨é€”ï¼š</span>
                                        <span class="font-medium" :class="code.role === 'admin' ? 'text-purple-600' : 'text-blue-600'">
                                            {{ code.role === 'admin' ? 'å‰µå»ºç®¡ç†å“¡' : 'å‰µå»ºæ™®é€šç”¨æˆ¶' }}
                                        </span>
                                    </div>
                                    <div class="text-sm mt-1">
                                        <span class="text-slate-600">ä½¿ç”¨æ¬¡æ•¸ï¼š</span>
                                        <span class="font-medium">{{ code.usedCount || 0 }}/{{ code.maxUses || 'ç„¡é™åˆ¶' }}</span>
                                    </div>
                                    <div class="mt-3 flex justify-end">
                                        <button @click="deleteInviteCode(code.code)" 
                                                class="text-red-600 hover:text-red-800 text-sm">
                                            åˆªé™¤
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ç”Ÿæˆæ–°é‚€è¯·ç è¡¨å• -->
                        <div class="bg-blue-50 p-4 rounded-xl border border-blue-200">
                            <h5 class="font-medium text-blue-700 mb-3">ç”Ÿæˆæ–°é‚€è«‹ç¢¼</h5>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-semibold text-blue-700 mb-2">è§’è‰²æ¬Šé™</label>
                                    <select v-model="newInviteCode.role" class="w-full px-3 py-2 border border-blue-200 rounded-lg bg-white">
                                        <option value="user">æ™®é€šç”¨æˆ¶</option>
                                        <option value="admin">ç®¡ç†å“¡</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-blue-700 mb-2">æœ€å¤§ä½¿ç”¨æ¬¡æ•¸</label>
                                    <input type="number" v-model="newInviteCode.maxUses" 
                                           placeholder="ç•™ç©ºè¡¨ç¤ºç„¡é™åˆ¶"
                                           class="w-full px-3 py-2 border border-blue-200 rounded-lg bg-white">
                                </div>
                                <div class="flex items-end">
                                    <button @click="createInviteCode" 
                                            class="w-full bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-medium transition-all">
                                        ç”Ÿæˆé‚€è«‹ç¢¼
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æäº¤æˆåŠŸæç¤º -->
        <div v-if="showSuccessMessage" class="fixed bottom-4 right-4 z-[300]" style="animation: slideInRight 0.5s ease-out;">
            <div class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center">
                <i class="fas fa-check-circle text-xl mr-3"></i>
                <div>
                    <p class="font-bold">{{ successMessage.title }}</p>
                    <p class="text-sm opacity-90">{{ successMessage.details }}</p>
                </div>
            </div>
        </div>

        <!-- åé¦ˆè¯¦æƒ…æ¨¡æ€æ¡† -->
        <div v-if="selectedFeedback" class="feedback-modal fixed inset-0 z-[500] flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl slide-up">
                <div class="sticky top-0 bg-white border-b border-slate-100 px-6 py-4 flex items-center justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800">åé¥‹è©³æƒ…</h3>
                        <p class="text-slate-500 text-sm mt-1">{{ selectedFeedback.subject }} - {{ selectedFeedback.year }}</p>
                    </div>
                    <button @click="selectedFeedback = null" class="w-8 h-8 rounded-full hover:bg-slate-100 flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-slate-400"></i>
                    </button>
                </div>
                <div class="p-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-1">æäº¤ç”¨æˆ¶</label>
                            <div class="text-slate-900">{{ selectedFeedback.user || 'åŒ¿åç”¨æˆ¶' }}</div>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-1">è©³ç´°æè¿°</label>
                            <div class="bg-slate-50 p-4 rounded-lg text-slate-700 whitespace-pre-wrap">
                                {{ selectedFeedback.description || 'ç„¡è©³ç´°æè¿°' }}
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-1">è¯ç¹«æ–¹å¼</label>
                            <div class="text-slate-900">{{ selectedFeedback.contact || 'æœªæä¾›' }}</div>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-1">æäº¤æ™‚é–“</label>
                            <div class="text-slate-600">{{ formatDate(selectedFeedback.createdAt) }}</div>
                        </div>
                        <div class="pt-4 border-t border-slate-100">
                            <a :href="selectedFeedback.githubUrl" target="_blank"
                               class="inline-flex items-center bg-gradient-to-r from-gray-700 to-gray-900 hover:from-gray-800 hover:to-black text-white px-4 py-2 rounded-lg font-medium transition-all">
                                <i class="fab fa-github mr-2"></i>
                                åœ¨ GitHub ä¸ŠæŸ¥çœ‹
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        
        // GitHub é…ç½®
        const GITHUB_CONFIG = {
            repo: 'findbaicha/untrammeled_dsepastpaper',
            feedbackLabels: 'ç”¨æˆ·åé¦ˆ,ç¼ºå¤±è¯•å·'
        };
        
        // é»˜è®¤ç®¡ç†å‘˜è´¦å·
        const DEFAULT_ADMIN = {
            username: 'admin1',
            password: 'admin123',
            role: 'admin'
        };
        
        // æ–‡ä»¶æ•°æ®
        const rawData = {
            "hkedb file": {
                "_files": ["å…­å›½è®º.pdf","å‡ºå¸ˆè¡¨.pdf","åŠå­¦.pdf","å§‹å¾—è¥¿å±±å®´æ¸¸è®°.pdf","å²³é˜³æ¥¼è®°.pdf","å¸ˆè¯´.pdf","å»‰é¢‡è”ºç›¸å¦‚åˆ—ä¼ .pdf","è®ºä»è®ºå­è®ºå›å­.pdf","é€é¥æ¸¸.pdf","é±¼æˆ‘æ‰€æ¬²ä¹Ÿ.pdf", "SET_TEXT_12.pdf"] ,
            },
            "Chinese": {
                "2012": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf", "p5.pdf", "per.pdf"] },
                "2013": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p4.pdf", "p5.pdf"] },
                "2014": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p4.pdf", "p5.pdf", "per.pdf"] },
                "2015": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p4.pdf", "p5.pdf"] },
                "2016": { "_files": ["ans.pdf", "p1.pdf", "p1.1.pdf", "p2.pdf", "p4.pdf", "p5.pdf", "per.pdf"] },
                "2017": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf", "p5.pdf"] },
                "2018": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                "2019": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                "2020": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                "2021": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                "2022": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "per.pdf"] },
                "2023": { "_files": ["ans.pdf", "p1.pdf","p2.pdf", "p3.pdf", "per.pdf"] },
                "2024": { "_files": ["p1.pdf"] },
                "PP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf", "p5.pdf"] },
                "SP": { "_files": ["ans.pdf", "p1 (1).pdf", "p2.pdf", "p3.pdf", "p4.pdf", "p5.pdf"] }
            },
            "English": {
                "DSE": {
                    "2012": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf", "per.pdf"] },
                    "2013": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2014": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2015": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2016": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2017": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2018": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2019": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2020": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                    "2021": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                    "2022": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                    "2023": { "_files": ["ans.pdf", "p1 (1).pdf", "p2.pdf", "p3.pdf", "p4.pdf", "per.pdf"] },
                    "PP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] }
                }
            },
            "Math": {
                "DSE": {
                    "ä¸­æ–‡ç‰ˆ": {
                        "2012": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2013": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2014": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2015": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2016": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2017": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2018": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2019": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2020": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2021": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2022": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2023": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2024": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "PP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "SP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] }
                    },
                    "è‹±æ–‡ç‰ˆ": {
                        "2012": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2013": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2014": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2015": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2016": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2017": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2018": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2019": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2020": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2021": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2022": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2023": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "PP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "SP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] }
                    }
                }
            },
            "ICT": {
                "2012": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2013": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2014": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2015": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2016": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2017": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2018": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2019": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2020": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2021": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2022": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2023": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "PP": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "SP": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] }
                    },
        };

        createApp({
            data() {
                return {
                    // æ–‡ä»¶æµè§ˆæ•°æ®
                    db: rawData,
                    breadcrumbs: [],
                    currentMenu: rawData,
                    
                    // ç”¨æˆ·è®¤è¯æ•°æ®
                    currentUser: null,
                    showLogin: false,
                    showRegister: false,
                    showPublicMessage: false,
                    
                    loginForm: {
                        username: '',
                        password: '',
                        remember: true
                    },
                    
                    registerForm: {
                        username: '',
                        password: '',
                        confirmPassword: '',
                        inviteCode: ''
                    },
                    
                    // ç”¨æˆ·ç®¡ç†æ•°æ®
                    users: [],
                    newUser: {
                        username: '',
                        password: '',
                        role: 'user'
                    },
                    showAddUserForm: false,
                    
                    // é‚€è¯·ç æ•°æ®
                    inviteCodes: [],
                    newInviteCode: {
                        role: 'user',
                        maxUses: ''
                    },
                    
                    // åé¦ˆæ•°æ®
                    feedbackList: [],
                    feedbackStats: {
                        total: 0,
                        recent: 0,
                        withContact: 0
                    },
                    
                    // ç®¡ç†å‘˜é¢æ¿
                    showAdminPanel: false,
                    adminTab: 'users',
                    
                    // PDF é¢„è§ˆ
                    pdfUrl: null,
                    viewingFileName: '',
                    
                    // åé¦ˆè¡¨å•
                    showFeedback: false,
                    feedback: {
                        subject: '',
                        year: '',
                        missingPapers: [],
                        language: '',
                        description: '',
                        contact: ''
                    },
                    
                    // æˆåŠŸæ¶ˆæ¯
                    showSuccessMessage: false,
                    successMessage: {
                        title: '',
                        details: ''
                    },
                    
                    // åé¦ˆè¯¦æƒ…
                    selectedFeedback: null
                }
            },
            computed: {
                // æ³¨å†Œè¡¨å•éªŒè¯ - ç°åœ¨å¿…é¡»è¦æœ‰é‚€è¯·ç 
                canRegister() {
                    return this.registerForm.username.length >= 3 &&
                           this.registerForm.password.length >= 6 &&
                           this.registerForm.password === this.registerForm.confirmPassword &&
                           this.registerForm.inviteCode.length >= 8; // é‚€è¯·ç å¿…é¡»è‡³å°‘8ä½
                },
                
                // åé¦ˆè¡¨å•éªŒè¯
                canSubmitFeedback() {
                    return this.feedback.subject && 
                           this.feedback.year && 
                           this.feedback.missingPapers.length > 0;
                },
                
                // ç”¨æˆ·ç»Ÿè®¡
                adminCount() {
                    return this.users.filter(user => user.role === 'admin').length;
                },
                
                activeUsers() {
                    const sevenDaysAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
                    return this.users.filter(user => {
                        if (!user.lastLogin) return false;
                        return new Date(user.lastLogin).getTime() > sevenDaysAgo;
                    }).length;
                },
                
                // è¿‡æ»¤æ‰å½“å‰ç”¨æˆ·
                filteredUsers() {
                    return this.users.filter(user => user.username !== this.currentUser?.username);
                },
                
                // çƒ­é—¨ç§‘ç›®
                mostCommonSubject() {
                    if (this.feedbackList.length === 0) return '-';
                    
                    const subjects = this.feedbackList.map(item => item.subject);
                    const counts = {};
                    
                    subjects.forEach(subject => {
                        counts[subject] = (counts[subject] || 0) + 1;
                    });
                    
                    let maxSubject = '';
                    let maxCount = 0;
                    
                    for (const [subject, count] of Object.entries(counts)) {
                        if (count > maxCount) {
                            maxCount = count;
                            maxSubject = subject;
                        }
                    }
                    
                    return maxSubject;
                }
            },
            methods: {
                // ============ æ–‡ä»¶æµè§ˆæ–¹æ³• ============
                enterDir(key) {
                    this.breadcrumbs.push(key);
                    this.currentMenu = this.currentMenu[key];
                },
                
                jumpTo(index) {
                    this.breadcrumbs = this.breadcrumbs.slice(0, index + 1);
                    let temp = this.db;
                    this.breadcrumbs.forEach(key => { temp = temp[key]; });
                    this.currentMenu = temp;
                },
                
                goHome() {
                    this.breadcrumbs = [];
                    this.currentMenu = this.db;
                },
                
                getFilePath(filename) {
                    return "./" + this.breadcrumbs.join('/') + "/" + filename;
                },
                
                formatFileName(name) {
                    return name.replace(/\s*\(\d+\)/g, '').replace(/\s*- å‰¯æœ¬/g, '').toUpperCase();
                },
                
                viewPdf(file) {
                    this.viewingFileName = this.formatFileName(file);
                    this.pdfUrl = this.getFilePath(file);
                    document.body.style.overflow = 'hidden';
                },
                
                closePdf() {
                    this.pdfUrl = null;
                    document.body.style.overflow = 'auto';
                },
                
                // ============ ç”¨æˆ·è®¤è¯æ–¹æ³• ============
                openLoginForm() {
                    this.showLogin = true;
                    this.showRegister = false;
                    this.showFeedback = false;
                    document.body.style.overflow = 'hidden';
                },
                
                openRegisterForm() {
                    this.showRegister = true;
                    this.showLogin = false;
                    this.showFeedback = false;
                    document.body.style.overflow = 'hidden';
                },
                
                closeAuthModal() {
                    this.showLogin = false;
                    this.showRegister = false;
                    document.body.style.overflow = 'auto';
                    this.resetAuthForms();
                },
                
                resetAuthForms() {
                    this.loginForm = { username: '', password: '', remember: true };
                    this.registerForm = { username: '', password: '', confirmPassword: '', inviteCode: '' };
                },
                
                async login() {
                    if (!this.loginForm.username || !this.loginForm.password) {
                        this.showError('è«‹è¼¸å…¥ç”¨æˆ¶åå’Œå¯†ç¢¼');
                        return;
                    }
                    
                    // æ£€æŸ¥é»˜è®¤ç®¡ç†å‘˜è´¦å·
                    if (this.loginForm.username === DEFAULT_ADMIN.username && 
                        this.loginForm.password === DEFAULT_ADMIN.password) {
                        this.currentUser = { ...DEFAULT_ADMIN, createdAt: new Date(), lastLogin: new Date() };
                        this.saveUserToStorage(this.currentUser);
                        this.showSuccess('ç™»éŒ„æˆåŠŸ', `æ­¡è¿å›ä¾†ï¼Œç®¡ç†å“¡ ${this.currentUser.username}ï¼`);
                        this.closeAuthModal();
                        this.loadUsersFromStorage();
                        return;
                    }
                    
                    // ä»æœ¬åœ°å­˜å‚¨æ£€æŸ¥ç”¨æˆ·
                    const users = this.getUsersFromStorage();
                    const user = users.find(u => 
                        u.username === this.loginForm.username && 
                        u.password === this.loginForm.password
                    );
                    
                    if (user) {
                        // æ›´æ–°æœ€åç™»å½•æ—¶é—´
                        user.lastLogin = new Date();
                        this.saveUsersToStorage(users);
                        
                        this.currentUser = user;
                        this.showSuccess('ç™»éŒ„æˆåŠŸ', `æ­¡è¿å›ä¾†ï¼Œ${user.username}ï¼`);
                        this.closeAuthModal();
                    } else {
                        this.showError('ç”¨æˆ¶åæˆ–å¯†ç¢¼éŒ¯èª¤');
                    }
                },
                
                async register() {
                    if (!this.canRegister) {
                        this.showError('è«‹å¡«å¯«å®Œæ•´çš„è¨»å†Šä¿¡æ¯ï¼ŒåŒ…æ‹¬æœ‰æ•ˆçš„é‚€è«‹ç¢¼');
                        return;
                    }
                    
                    // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
                    const users = this.getUsersFromStorage();
                    const existingUser = users.find(u => u.username === this.registerForm.username);
                    
                    if (existingUser) {
                        this.showError('ç”¨æˆ¶åå·²å­˜åœ¨');
                        return;
                    }
                    
                    // éªŒè¯é‚€è¯·ç ï¼ˆç°åœ¨æ˜¯å¿…é¡»çš„ï¼‰
                    const inviteCodes = this.getInviteCodesFromStorage();
                    const validCode = inviteCodes.find(code => 
                        code.code === this.registerForm.inviteCode && 
                        (!code.maxUses || (code.usedCount || 0) < code.maxUses)
                    );
                    
                    if (!validCode) {
                        this.showError('é‚€è«‹ç¢¼ç„¡æ•ˆæˆ–å·²éæœŸ');
                        return;
                    }
                    
                    // æ£€æŸ¥é‚€è¯·ç æ˜¯å¦å·²è¾¾åˆ°æœ€å¤§ä½¿ç”¨æ¬¡æ•°
                    if (validCode.maxUses && (validCode.usedCount || 0) >= validCode.maxUses) {
                        this.showError('é‚€è«‹ç¢¼å·²é”åˆ°æœ€å¤§ä½¿ç”¨æ¬¡æ•¸');
                        return;
                    }
                    
                    // åˆ›å»ºæ–°ç”¨æˆ·ï¼Œè§’è‰²ç”±é‚€è¯·ç å†³å®š
                    const newUser = {
                        username: this.registerForm.username,
                        password: this.registerForm.password,
                        role: validCode.role || 'user',
                        createdAt: new Date(),
                        lastLogin: new Date(),
                        registeredWith: validCode.code // è®°å½•ä½¿ç”¨çš„é‚€è¯·ç 
                    };
                    
                    users.push(newUser);
                    this.saveUsersToStorage(users);
                    
                    // æ›´æ–°é‚€è¯·ç ä½¿ç”¨æ¬¡æ•°
                    validCode.usedCount = (validCode.usedCount || 0) + 1;
                    validCode.lastUsed = new Date();
                    validCode.lastUsedBy = newUser.username;
                    this.saveInviteCodesToStorage(inviteCodes);
                    
                    this.currentUser = newUser;
                    this.showSuccess('è¨»å†ŠæˆåŠŸ', `æ­¡è¿ ${newUser.username}ï¼æ‚¨å·²æˆåŠŸä½¿ç”¨é‚€è«‹ç¢¼è¨»å†Šã€‚`);
                    this.closeAuthModal();
                    this.loadUsersFromStorage();
                },
                
                logout() {
                    this.currentUser = null;
                    this.showPublicMessage = false;
                    this.showSuccess('å·²ç™»å‡º', 'æ‚¨å·²æˆåŠŸç™»å‡ºç³»çµ±');
                },
                
                enablePublicAccess() {
                    this.showPublicMessage = true;
                    this.showSuccess('å…¬å…±ç€è¦½', 'æ‚¨ç¾åœ¨å¯ä»¥ç€è¦½å…¬é–‹è³‡æº');
                },
                
                // ============ ç”¨æˆ·ç®¡ç†æ–¹æ³• ============
                openAdminPanel() {
                    this.showAdminPanel = true;
                    document.body.style.overflow = 'hidden';
                    this.loadUsersFromStorage();
                    this.loadInviteCodesFromStorage();
                    this.loadFeedbackData();
                },
                
                closeAdminPanel() {
                    this.showAdminPanel = false;
                    document.body.style.overflow = 'auto';
                    this.showAddUserForm = false;
                    this.newUser = { username: '', password: '', role: 'user' };
                },
                
                loadUsersFromStorage() {
                    const users = this.getUsersFromStorage();
                    // ç¡®ä¿é»˜è®¤ç®¡ç†å‘˜å­˜åœ¨
                    const adminExists = users.some(u => u.username === DEFAULT_ADMIN.username);
                    if (!adminExists) {
                        users.push({
                            ...DEFAULT_ADMIN,
                            createdAt: new Date('2024-01-01'),
                            lastLogin: new Date()
                        });
                        this.saveUsersToStorage(users);
                    }
                    this.users = users;
                },
                
                addNewUser() {
                    if (!this.newUser.username || !this.newUser.password) {
                        this.showError('è«‹å¡«å¯«ç”¨æˆ¶åå’Œå¯†ç¢¼');
                        return;
                    }
                    
                    const users = this.getUsersFromStorage();
                    
                    // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
                    if (users.some(u => u.username === this.newUser.username)) {
                        this.showError('ç”¨æˆ¶åå·²å­˜åœ¨');
                        return;
                    }
                    
                    const newUser = {
                        username: this.newUser.username,
                        password: this.newUser.password,
                        role: this.newUser.role,
                        createdAt: new Date(),
                        lastLogin: null
                    };
                    
                    users.push(newUser);
                    this.saveUsersToStorage(users);
                    
                    this.showSuccess('ç”¨æˆ¶å‰µå»ºæˆåŠŸ', `å·²æˆåŠŸå‰µå»ºç”¨æˆ¶ ${newUser.username}`);
                    this.loadUsersFromStorage();
                    this.newUser = { username: '', password: '', role: 'user' };
                    this.showAddUserForm = false;
                },
                
                editUser(user) {
                    // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œå¯ä»¥æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†
                    this.showSuccess('ç·¨è¼¯ç”¨æˆ¶', `ç·¨è¼¯ç”¨æˆ¶ ${user.username}`);
                },
                
                deleteUser(user) {
                    if (confirm(`ç¢ºå®šè¦åˆªé™¤ç”¨æˆ¶ ${user.username} å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚`)) {
                        const users = this.getUsersFromStorage();
                        const updatedUsers = users.filter(u => u.username !== user.username);
                        this.saveUsersToStorage(updatedUsers);
                        this.loadUsersFromStorage();
                        this.showSuccess('ç”¨æˆ¶åˆªé™¤æˆåŠŸ', `å·²åˆªé™¤ç”¨æˆ¶ ${user.username}`);
                    }
                },
                
                // ============ é‚€è¯·ç ç®¡ç†æ–¹æ³• ============
                loadInviteCodesFromStorage() {
                    const codes = this.getInviteCodesFromStorage();
                    
                    // å¦‚æœæ²¡æœ‰é‚€è¯·ç ï¼Œåˆ›å»ºä¸€ä¸ªé»˜è®¤çš„æ™®é€šç”¨æˆ·é‚€è¯·ç 
                    if (codes.length === 0 && this.currentUser?.role === 'admin') {
                        const defaultCode = {
                            code: 'WELCOME01',
                            role: 'user',
                            maxUses: 100,
                            usedCount: 0,
                            createdAt: new Date(),
                            description: 'é»˜è®¤æ¬¢è¿é‚€è¯·ç '
                        };
                        codes.push(defaultCode);
                        this.saveInviteCodesToStorage(codes);
                    }
                    
                    this.inviteCodes = codes;
                },
                
                generateInviteCode() {
                    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                    let code = '';
                    for (let i = 0; i < 8; i++) {
                        code += characters.charAt(Math.floor(Math.random() * characters.length));
                    }
                    
                    this.newInviteCode.code = code;
                    this.createInviteCode();
                },
                
                createInviteCode() {
                    const code = {
                        code: this.newInviteCode.code || this.generateRandomCode(),
                        role: this.newInviteCode.role,
                        maxUses: this.newInviteCode.maxUses ? parseInt(this.newInviteCode.maxUses) : null,
                        usedCount: 0,
                        createdAt: new Date(),
                        description: `å‰µå»ºæ–¼ ${new Date().toLocaleDateString()}`
                    };
                    
                    const codes = this.getInviteCodesFromStorage();
                    codes.push(code);
                    this.saveInviteCodesToStorage(codes);
                    
                    this.showSuccess('é‚€è«‹ç¢¼å‰µå»ºæˆåŠŸ', `é‚€è«‹ç¢¼ï¼š${code.code}ï¼ˆ${code.role === 'admin' ? 'ç®¡ç†å“¡' : 'æ™®é€šç”¨æˆ¶'}ï¼‰`);
                    this.loadInviteCodesFromStorage();
                    this.newInviteCode = { role: 'user', maxUses: '' };
                },
                
                generateRandomCode() {
                    return Math.random().toString(36).substring(2, 10).toUpperCase();
                },
                
                copyInviteCode(code) {
                    navigator.clipboard.writeText(code).then(() => {
                        this.showSuccess('å·²è¤‡è£½', `é‚€è«‹ç¢¼ ${code} å·²è¤‡è£½åˆ°å‰ªè²¼æ¿`);
                    });
                },
                
                deleteInviteCode(code) {
                    if (confirm(`ç¢ºå®šè¦åˆªé™¤é‚€è«‹ç¢¼ ${code} å—ï¼Ÿ`)) {
                        const codes = this.getInviteCodesFromStorage();
                        const updatedCodes = codes.filter(c => c.code !== code);
                        this.saveInviteCodesToStorage(updatedCodes);
                        this.loadInviteCodesFromStorage();
                        this.showSuccess('é‚€è«‹ç¢¼åˆªé™¤æˆåŠŸ', `å·²åˆªé™¤é‚€è«‹ç¢¼ ${code}`);
                    }
                },
                
                // ============ åé¦ˆç®¡ç†æ–¹æ³• ============
                loadFeedbackData() {
                    // ä»æœ¬åœ°å­˜å‚¨åŠ è½½åé¦ˆæ•°æ®
                    const feedback = JSON.parse(localStorage.getItem('dse_feedback') || '[]');
                    this.feedbackList = feedback;
                    
                    // è®¡ç®—ç»Ÿè®¡
                    this.feedbackStats.total = feedback.length;
                    
                    const sevenDaysAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
                    this.feedbackStats.recent = feedback.filter(item => {
                        return new Date(item.createdAt).getTime() > sevenDaysAgo;
                    }).length;
                    
                    this.feedbackStats.withContact = feedback.filter(item => item.contact).length;
                },
                
                refreshFeedback() {
                    this.loadFeedbackData();
                    this.showSuccess('æ•¸æ“šå·²åˆ·æ–°', 'åé¥‹æ•¸æ“šå·²æ›´æ–°');
                },
                
                openAllFeedback() {
                    const url = `https://github.com/${GITHUB_CONFIG.repo}/issues`;
                    window.open(url, '_blank');
                },
                
                viewFeedbackDetail(item) {
                    this.selectedFeedback = {
                        ...item,
                        githubUrl: `https://github.com/${GITHUB_CONFIG.repo}/issues`
                    };
                },
                
                // ============ åé¦ˆè¡¨å•æ–¹æ³• ============
                showFeedbackForm() {
                    if (!this.currentUser && !this.showPublicMessage) {
                        this.showError('è«‹å…ˆç™»éŒ„æˆ–ä½¿ç”¨å…¬å…±ç€è¦½åŠŸèƒ½');
                        return;
                    }
                    
                    this.showFeedback = true;
                    document.body.style.overflow = 'hidden';
                },
                
                closeFeedbackForm() {
                    this.showFeedback = false;
                    document.body.style.overflow = 'auto';
                },
                
                resetFeedbackForm() {
                    this.feedback = {
                        subject: '',
                        year: '',
                        missingPapers: [],
                        language: '',
                        description: '',
                        contact: ''
                    };
                },
                
                async submitFeedback() {
                    if (!this.canSubmitFeedback) return;
                    
                    // 1. æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                    this.showSuccessMessage = true;
                    this.successMessage = {
                        title: 'å ±å‘Šå·²æäº¤ï¼',
                        details: 'æ­£åœ¨æ‰“é–‹ GitHub é é¢...'
                    };
                    
                    // 2. ç»„ç»‡åé¦ˆå†…å®¹ä¸ºMarkdownæ ¼å¼
                    const issueBody = this.generateIssueBody();
                    
                    // 3. ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                    this.saveFeedbackToLocal();
                    
                    // 4. åˆ›å»ºGitHub Issues URL
                    const issueUrl = this.generateGitHubIssueUrl(issueBody);
                    
                    // 5. å»¶è¿Ÿåæ‰“å¼€GitHubé¡µé¢
                    setTimeout(() => {
                        window.open(issueUrl, '_blank', 'noopener,noreferrer');
                        
                        // 6. å…³é—­è¡¨å•å’Œæ¶ˆæ¯
                        setTimeout(() => {
                            this.showSuccessMessage = false;
                            this.closeFeedbackForm();
                            this.resetFeedbackForm();
                        }, 2000);
                    }, 1000);
                },
                
                generateIssueBody() {
                    const userInfo = this.currentUser ? 
                        `æäº¤ç”¨æˆ¶ï¼š${this.currentUser.username} (${this.currentUser.role})` : 
                        'æäº¤ç”¨æˆ¶ï¼šåŒ¿åç”¨æˆ¶ (å…¬å…±ç€è¦½)';
                    
                    return `
**ğŸ“‹ ç¼ºå¤±è©¦å·å ±å‘Š**

| é …ç›® | å…§å®¹ |
| :--- | :--- |
| **ç§‘ç›®** | ${this.feedback.subject} |
| **å¹´ä»½** | ${this.feedback.year} |
| **ç¼ºå¤±éƒ¨åˆ†** | ${this.feedback.missingPapers.join(', ')} |
| **èªè¨€ç‰ˆæœ¬** | ${this.feedback.language || 'æœªæŒ‡å®š'} |
| **è©³ç´°èªªæ˜** | ${this.feedback.description || 'ç„¡'} |
| **è¯ç¹«æ–¹å¼** | ${this.feedback.contact || 'æœªæä¾›'} |

**ğŸ“… æäº¤ä¿¡æ¯**
- ${userInfo}
- æäº¤æ™‚é–“ï¼š${new Date().toLocaleString('zh-Hant')}
- æäº¤ä¾†æºï¼šDSE Resource Hub

---
*æ­¤å ±å‘Šé€šé DSE è³‡æºåº«åé¥‹ç³»çµ±æäº¤*
                    `.trim();
                },
                
                generateGitHubIssueUrl(issueBody) {
                    const issueTitle = `[ç¼ºå¤±è©¦å·] ${this.feedback.subject} ${this.feedback.year}`;
                    const baseUrl = `https://github.com/${GITHUB_CONFIG.repo}/issues/new`;
                    
                    const params = new URLSearchParams({
                        'title': issueTitle,
                        'body': issueBody,
                        'labels': GITHUB_CONFIG.feedbackLabels
                    });
                    
                    return `${baseUrl}?${params.toString()}`;
                },
                
                saveFeedbackToLocal() {
                    const feedback = {
                        id: Date.now(),
                        ...this.feedback,
                        user: this.currentUser?.username || 'åŒ¿å',
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    const allFeedback = JSON.parse(localStorage.getItem('dse_feedback') || '[]');
                    allFeedback.push(feedback);
                    localStorage.setItem('dse_feedback', JSON.stringify(allFeedback));
                },
                
                // ============ å·¥å…·æ–¹æ³• ============
                formatDate(date) {
                    if (!date) return 'æœªçŸ¥';
                    const d = new Date(date);
                    return d.toLocaleString('zh-Hant');
                },
                
                showSuccess(title, details) {
                    this.successMessage = { title, details };
                    this.showSuccessMessage = true;
                    
                    setTimeout(() => {
                        this.showSuccessMessage = false;
                    }, 3000);
                },
                
                showError(message) {
                    this.successMessage = { title: 'éŒ¯èª¤', details: message };
                    this.showSuccessMessage = true;
                    
                    setTimeout(() => {
                        this.showSuccessMessage = false;
                    }, 3000);
                },
                
                // ============ æœ¬åœ°å­˜å‚¨æ–¹æ³• ============
                saveUserToStorage(user) {
                    if (user) {
                        localStorage.setItem('dse_current_user', JSON.stringify(user));
                    }
                },
                
                getUsersFromStorage() {
                    return JSON.parse(localStorage.getItem('dse_users') || '[]');
                },
                
                saveUsersToStorage(users) {
                    localStorage.setItem('dse_users', JSON.stringify(users));
                },
                
                getInviteCodesFromStorage() {
                    return JSON.parse(localStorage.getItem('dse_invite_codes') || '[]');
                },
                
                saveInviteCodesToStorage(codes) {
                    localStorage.setItem('dse_invite_codes', JSON.stringify(codes));
                }
            },
            mounted() {
                // å°è¯•ä»æœ¬åœ°å­˜å‚¨æ¢å¤ç™»å½•çŠ¶æ€
                const savedUser = localStorage.getItem('dse_current_user');
                if (savedUser) {
                    try {
                        this.currentUser = JSON.parse(savedUser);
                        
                        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä»ç„¶å­˜åœ¨
                        const users = this.getUsersFromStorage();
                        const userExists = users.some(u => u.username === this.currentUser.username);
                        
                        if (!userExists && this.currentUser.username !== DEFAULT_ADMIN.username) {
                            // ç”¨æˆ·ä¸å­˜åœ¨ï¼Œæ¸…é™¤ç™»å½•çŠ¶æ€
                            localStorage.removeItem('dse_current_user');
                            this.currentUser = null;
                        } else {
                            // æ›´æ–°æœ€åç™»å½•æ—¶é—´
                            this.currentUser.lastLogin = new Date();
                            this.saveUserToStorage(this.currentUser);
                        }
                    } catch (e) {
                        console.error('Failed to parse saved user:', e);
                        localStorage.removeItem('dse_current_user');
                    }
                }
                
                // ç¡®ä¿é»˜è®¤æ•°æ®å­˜åœ¨
                this.loadUsersFromStorage();
                this.loadInviteCodesFromStorage();
                
                console.log('DSE Resource Hub å·²è¼‰å…¥');
                console.log('GitHub å€‰åº«ï¼š', GITHUB_CONFIG.repo);
                console.log('é è¨­ç®¡ç†å“¡å¸³è™Ÿï¼š', DEFAULT_ADMIN.username);
                console.log('è¨»å†Šç³»çµ±ï¼šå¿…é ˆä½¿ç”¨é‚€è«‹ç¢¼');
            }
        }).mount('#app')
    </script>
</body>
</html>
