<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HKDSE Past Paper è³‡æºåº« | Untrammeled</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0,0,0,0.06); }
        .breadcrumb-item:after { content: '>'; margin: 0 10px; color: #94a3b8; font-size: 0.8rem; }
        .breadcrumb-item:last-child:after { content: ''; }
        
        /* PDF é¢„è§ˆæ¨¡æ€æ¡† */
        .pdf-modal { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(4px); }
        
        /* åé¦ˆæ¨¡æ€æ¡† */
        .feedback-modal { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(8px); }
        .slide-up { animation: slideUp 0.3s ease-out; }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* è¡¨æ ¼æ ·å¼ */
        .table-container {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .table-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .table-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        
        .table-container::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        .table-container::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>
<body class="bg-[#f8fafc] min-h-screen pb-20">
    <div id="app" class="max-w-6xl mx-auto px-4 py-8">
        <!-- é¡¶éƒ¨æ  -->
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
            <div class="mb-4 md:mb-0">
                <h1 class="text-3xl font-black text-slate-800 tracking-tight">DSE Resource Hub</h1>
                <p class="text-slate-400 text-sm mt-1 font-medium">Untrammeled's Past Paper Library</p>
            </div>
            <div class="flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-4">
                <span class="bg-blue-50 text-blue-600 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider inline-block w-fit">Public Archive</span>
                
                <!-- åé¦ˆæŒ‰é’® -->
                <button @click="showFeedbackForm" 
                        class="bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-xl text-sm font-bold transition-all shadow-sm hover:shadow-md flex items-center">
                    <i class="fas fa-comment-medical mr-2"></i>
                    å ±å‘Šç¼ºå¤±è©¦å·
                </button>
            </div>
        </header>

        <!-- é¢åŒ…å±‘å¯¼èˆª -->
        <nav class="flex items-center mb-6 px-2 overflow-x-auto whitespace-nowrap pb-2">
            <button @click="goHome" class="flex items-center text-blue-600 hover:text-blue-800 transition flex-shrink-0">
                <i class="fas fa-home mr-2"></i>
                <span class="font-bold">Home</span>
            </button>
            <div v-for="(crumb, index) in breadcrumbs" :key="index" class="breadcrumb-item flex items-center flex-shrink-0">
                <button @click="jumpTo(index)" class="text-slate-500 hover:text-blue-600 font-medium transition">{{ crumb }}</button>
            </div>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div>
            <div v-if="Object.keys(currentMenu).length > (currentMenu._files ? 1 : 0)" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
                <div v-for="(value, key) in currentMenu" v-show="key !== '_files'" 
                     @click="enterDir(key)"
                     class="card-hover cursor-pointer bg-white p-6 rounded-2xl border border-slate-100 flex items-center justify-between transition-all group">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 bg-slate-50 group-hover:bg-blue-50 text-slate-400 group-hover:text-blue-500 rounded-xl flex items-center justify-center transition-colors">
                            <i class="fas fa-folder text-xl"></i>
                        </div>
                        <div>
                            <span class="font-bold text-slate-700 text-lg block leading-tight">{{ key }}</span>
                            <span class="text-slate-400 text-xs mt-1">Click to view items</span>
                        </div>
                    </div>
                    <i class="fas fa-arrow-right text-slate-200 group-hover:text-blue-300 transition-colors"></i>
                </div>
            </div>

            <!-- æ–‡ä»¶åˆ—è¡¨ -->
            <div v-if="currentMenu._files" class="mt-8">
                <div class="bg-white rounded-3xl shadow-sm border border-slate-100 overflow-hidden">
                    <div class="px-6 py-4 bg-slate-50 border-b border-slate-100 flex justify-between items-center">
                        <span class="font-bold text-slate-500 uppercase text-xs tracking-widest">Available PDF Documents</span>
                        <span class="text-slate-400 text-xs">{{ currentMenu._files.length }} Files</span>
                    </div>
                    <div class="divide-y divide-slate-50">
                        <div v-for="file in currentMenu._files" @click="viewPdf(file)"
                           class="flex items-center justify-between p-5 hover:bg-blue-50/50 group transition-all cursor-pointer">
                            <div class="flex items-center pr-4">
                                <div class="w-10 h-10 flex items-center justify-center text-red-500 bg-red-50 rounded-lg mr-4 group-hover:scale-110 transition-transform">
                                    <i class="fas fa-file-pdf text-lg"></i>
                                </div>
                                <div>
                                    <span class="text-slate-700 group-hover:text-blue-700 font-semibold block transition-colors">
                                        {{ formatFileName(file) }}
                                    </span>
                                    <span class="text-slate-400 text-xs">PDF Document</span>
                                </div>
                            </div>
                            <div class="flex items-center text-blue-500 font-bold text-xs bg-white px-4 py-2 rounded-full border border-slate-100 shadow-sm group-hover:bg-blue-600 group-hover:text-white transition-all">
                                VIEW <i class="fas fa-eye ml-2"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç©ºæ–‡ä»¶å¤¹æç¤º -->
            <div v-if="Object.keys(currentMenu).length === 0" class="text-center py-20 bg-white rounded-3xl border border-dashed border-slate-200">
                <i class="fas fa-inbox text-slate-200 text-5xl mb-4"></i>
                <p class="text-slate-400">This folder is empty.</p>
            </div>
        </div>

        <!-- PDF é¢„è§ˆæ¨¡æ€æ¡† -->
        <div v-if="pdfUrl" class="pdf-modal fixed inset-0 z-[100] flex flex-col">
            <div class="flex items-center justify-between p-4 text-white">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-file-pdf text-red-500 text-xl"></i>
                    <span class="font-bold tracking-tight">{{ viewingFileName }}</span>
                </div>
                <button @click="closePdf" class="w-10 h-10 rounded-full bg-white/10 hover:bg-red-500 transition-colors flex items-center justify-center text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="flex-grow bg-white m-2 md:m-4 rounded-xl overflow-hidden shadow-2xl">
                <iframe :src="pdfUrl" class="w-full h-full border-none"></iframe>
            </div>
        </div>

        <!-- åé¦ˆè¡¨æ ¼æ¨¡æ€æ¡† -->
        <div v-if="showFeedback" class="feedback-modal fixed inset-0 z-[200] flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto slide-up">
                <!-- å¤´éƒ¨ -->
                <div class="sticky top-0 bg-white border-b border-slate-100 px-6 py-4 flex items-center justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800">ğŸ“ å ±å‘Šç¼ºå¤±è©¦å·</h3>
                        <p class="text-slate-500 text-sm mt-1">å¹«åŠ©æˆ‘å€‘å®Œå–„è³‡æºåº«</p>
                    </div>
                    <button @click="closeFeedbackForm" class="w-8 h-8 rounded-full hover:bg-slate-100 flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-slate-400"></i>
                    </button>
                </div>

                <!-- è¡¨å•å†…å®¹ -->
                <div class="p-6 space-y-6">
                    <!-- ç§‘ç›®é€‰æ‹© -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ç§‘ç›® <span class="text-red-500">*</span>
                        </label>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                            <button v-for="subject in ['Chinese', 'English', 'Math', 'LS', 'Phy', 'Chem', 'Bio', 'Econ', 'Geog', 'Hist', 'BAFS', 'ICT']"
                                    :key="subject"
                                    @click="feedback.subject = subject"
                                    :class="feedback.subject === subject 
                                            ? 'bg-blue-100 border-blue-500 text-blue-700' 
                                            : 'bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100'"
                                    class="border rounded-lg py-3 px-4 text-sm font-medium transition-all text-center">
                                {{ subject }}
                            </button>
                        </div>
                    </div>

                    <!-- å¹´ä»½é€‰æ‹© -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            å¹´ä»½ <span class="text-red-500">*</span>
                        </label>
                        <div class="flex flex-wrap gap-2">
                            <button v-for="year in [2024, 2023, 2022, 2021, 2020, 2019, 2018, 2017, 2016, 2015, 2014, 2013, 2012, 'PP', 'SP']"
                                    :key="year"
                                    @click="feedback.year = year"
                                    :class="feedback.year === year 
                                            ? 'bg-blue-100 border-blue-500 text-blue-700' 
                                            : 'bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100'"
                                    class="border rounded-lg py-2 px-4 text-sm font-medium transition-all">
                                    {{ year }}
                            </button>
                        </div>
                    </div>

                    <!-- è¯•å·éƒ¨åˆ†é€‰æ‹© -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ç¼ºå¤±çš„è©¦å·éƒ¨åˆ† <span class="text-red-500">*</span>
                        </label>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                            <div v-for="paper in ['Paper 1', 'Paper 2', 'Paper 3', 'Paper 4', 'Paper 5', 'Answer Key', 'Marking Scheme']"
                                 :key="paper"
                                 class="flex items-center">
                                <input :id="'paper-' + paper" 
                                       type="checkbox" 
                                       :value="paper"
                                       v-model="feedback.missingPapers"
                                       class="h-4 w-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500">
                                <label :for="'paper-' + paper" class="ml-2 text-slate-700 text-sm">
                                    {{ paper }}
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- è¯­è¨€ç‰ˆæœ¬ -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            èªè¨€ç‰ˆæœ¬
                        </label>
                        <div class="flex gap-4">
                            <label class="inline-flex items-center">
                                <input type="radio" v-model="feedback.language" value="ä¸­æ–‡ç‰ˆ" class="h-4 w-4 text-blue-600">
                                <span class="ml-2 text-slate-700 text-sm">ä¸­æ–‡ç‰ˆ</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" v-model="feedback.language" value="è‹±æ–‡ç‰ˆ" class="h-4 w-4 text-blue-600">
                                <span class="ml-2 text-slate-700 text-sm">è‹±æ–‡ç‰ˆ</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" v-model="feedback.language" value="both" class="h-4 w-4 text-blue-600">
                                <span class="ml-2 text-slate-700 text-sm">å…©è€…çš†æœ‰</span>
                            </label>
                        </div>
                    </div>

                    <!-- é¢å¤–è¯´æ˜ -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            è©³ç´°èªªæ˜
                        </label>
                        <textarea v-model="feedback.description" 
                                  placeholder="è«‹æä¾›æ›´å¤šç´°ç¯€ï¼Œä¾‹å¦‚ï¼šå…·é«”ç¼ºå¤±çš„å…§å®¹ã€æ–‡ä»¶æ ¼å¼å»ºè­°ç­‰..."
                                  class="w-full h-32 px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none"></textarea>
                    </div>

                    <!-- è”ç³»æ–¹å¼ -->
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            è¯ç¹«æ–¹å¼ï¼ˆå¯é¸ï¼‰
                        </label>
                        <input type="email" v-model="feedback.contact" 
                               placeholder="email@example.com"
                               class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                        <p class="text-slate-400 text-xs mt-1">åƒ…ç”¨æ–¼å¿…è¦æ™‚è¯ç¹«æ‚¨ï¼Œä¸æœƒå…¬é–‹é¡¯ç¤º</p>
                    </div>

                    <!-- æäº¤æŒ‰é’® -->
                    <div class="pt-4 border-t border-slate-100">
                        <div class="flex justify-between items-center">
                            <button @click="submitFeedback" 
                                    :disabled="!canSubmitFeedback"
                                    :class="canSubmitFeedback 
                                            ? 'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600' 
                                            : 'bg-slate-300 cursor-not-allowed'"
                                    class="text-white px-8 py-3 rounded-xl font-bold transition-all shadow-sm hover:shadow-md flex items-center">
                                <i class="fas fa-paper-plane mr-2"></i>
                                æäº¤å ±å‘Š
                            </button>
                            <button @click="resetFeedbackForm" class="text-slate-500 hover:text-slate-700 px-4 py-2 rounded-lg font-medium transition-colors">
                                é‡è¨­è¡¨å–®
                            </button>
                        </div>
                        <p class="text-slate-400 text-xs mt-4 text-center">
                            æäº¤å¾Œå°‡è·³è½‰åˆ° GitHub å‰µå»ºåé¥‹ Issueï¼Œæ‚¨çš„è²¢ç»å°‡å¹«åŠ©æ›´å¤šäººï¼
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- æäº¤æˆåŠŸæç¤º -->
        <div v-if="showSuccessMessage" class="fixed bottom-4 right-4 z-[300]" style="animation: slideInRight 0.5s ease-out;">
            <div class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center">
                <i class="fas fa-check-circle text-xl mr-3"></i>
                <div>
                    <p class="font-bold">{{ successMessage.title }}</p>
                    <p class="text-sm opacity-90">{{ successMessage.details }}</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        
        // GitHub é…ç½®
        const GITHUB_CONFIG = {
            repo: 'findbaicha/untrammeled_dsepastpaper',
            feedbackLabels: 'ç”¨æˆ·åé¦ˆ,ç¼ºå¤±è¯•å·'
        };
        
        // æ–‡ä»¶æ•°æ®
        const rawData = {
            "hkedb file": {
                "_files": ["å…­å›½è®º.pdf","å‡ºå¸ˆè¡¨.pdf","åŠå­¦.pdf","å§‹å¾—è¥¿å±±å®´æ¸¸è®°.pdf","å²³é˜³æ¥¼è®°.pdf","å¸ˆè¯´.pdf","å»‰é¢‡è”ºç›¸å¦‚åˆ—ä¼ .pdf","è®ºä»è®ºå­è®ºå›å­.pdf","é€é¥æ¸¸.pdf","é±¼æˆ‘æ‰€æ¬²ä¹Ÿ.pdf", "SET_TEXT_12.pdf"] ,
            },
            "Chinese": {
                "2012": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf", "p5.pdf", "per.pdf"] },
                "2013": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p4.pdf", "p5.pdf"] },
                "2014": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p4.pdf", "p5.pdf", "per.pdf"] },
                "2015": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p4.pdf", "p5.pdf"] },
                "2016": { "_files": ["ans.pdf", "p1.pdf", "p1.1.pdf", "p2.pdf", "p4.pdf", "p5.pdf", "per.pdf"] },
                "2017": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf", "p5.pdf"] },
                "2018": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                "2019": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                "2020": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                "2021": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                "2022": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "per.pdf"] },
                "2023": { "_files": ["ans.pdf", "p1.pdf","p2.pdf", "p3.pdf", "per.pdf"] },
                "2024": { "_files": ["p1.pdf"] },
                "PP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf", "p5.pdf"] },
                "SP": { "_files": ["ans.pdf", "p1 (1).pdf", "p2.pdf", "p3.pdf", "p4.pdf", "p5.pdf"] }
            },
            "English": {
                "DSE": {
                    "2012": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf", "per.pdf"] },
                    "2013": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2014": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2015": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2016": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2017": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2018": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2019": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] },
                    "2020": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                    "2021": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                    "2022": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf"] },
                    "2023": { "_files": ["ans.pdf", "p1 (1).pdf", "p2.pdf", "p3.pdf", "p4.pdf", "per.pdf"] },
                    "PP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf", "p3.pdf", "p4.pdf"] }
                }
            },
            "Math": {
                "DSE": {
                    "ä¸­æ–‡ç‰ˆ": {
                        "2012": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2013": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2014": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2015": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2016": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2017": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2018": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2019": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2020": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2021": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2022": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2023": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2024": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "PP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "SP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] }
                    },
                    "è‹±æ–‡ç‰ˆ": {
                        "2012": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2013": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2014": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2015": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2016": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2017": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2018": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2019": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2020": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2021": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2022": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "2023": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "PP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] },
                        "SP": { "_files": ["ans.pdf", "p1.pdf", "p2.pdf"] }
                    }
                }
            },
            "ICT": {
                "2012": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2013": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2014": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2015": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2016": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2017": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2018": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2019": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2020": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2021": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2022": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "2023": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "PP": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] },
                "SP": { "_files": ["ans.pdf", "p1.pdf", "p2a.pdf"] }
                    },
        };

        createApp({
            data() {
                return {
                    // æ–‡ä»¶æµè§ˆæ•°æ®
                    db: rawData,
                    breadcrumbs: [],
                    currentMenu: rawData,
                    
                    // PDF é¢„è§ˆ
                    pdfUrl: null,
                    viewingFileName: '',
                    
                    // åé¦ˆè¡¨å•
                    showFeedback: false,
                    feedback: {
                        subject: '',
                        year: '',
                        missingPapers: [],
                        language: '',
                        description: '',
                        contact: ''
                    },
                    
                    // æˆåŠŸæ¶ˆæ¯
                    showSuccessMessage: false,
                    successMessage: {
                        title: '',
                        details: ''
                    }
                }
            },
            computed: {
                // åé¦ˆè¡¨å•éªŒè¯
                canSubmitFeedback() {
                    return this.feedback.subject && 
                           this.feedback.year && 
                           this.feedback.missingPapers.length > 0;
                }
            },
            methods: {
                // ============ æ–‡ä»¶æµè§ˆæ–¹æ³• ============
                enterDir(key) {
                    this.breadcrumbs.push(key);
                    this.currentMenu = this.currentMenu[key];
                },
                
                jumpTo(index) {
                    this.breadcrumbs = this.breadcrumbs.slice(0, index + 1);
                    let temp = this.db;
                    this.breadcrumbs.forEach(key => { temp = temp[key]; });
                    this.currentMenu = temp;
                },
                
                goHome() {
                    this.breadcrumbs = [];
                    this.currentMenu = this.db;
                },
                
                getFilePath(filename) {
                    return "./" + this.breadcrumbs.join('/') + "/" + filename;
                },
                
                formatFileName(name) {
                    return name.replace(/\s*\(\d+\)/g, '').replace(/\s*- å‰¯æœ¬/g, '').toUpperCase();
                },
                
                viewPdf(file) {
                    this.viewingFileName = this.formatFileName(file);
                    this.pdfUrl = this.getFilePath(file);
                    document.body.style.overflow = 'hidden';
                },
                
                closePdf() {
                    this.pdfUrl = null;
                    document.body.style.overflow = 'auto';
                },
                
                // ============ åé¦ˆè¡¨å•æ–¹æ³• ============
                showFeedbackForm() {
                    this.showFeedback = true;
                    document.body.style.overflow = 'hidden';
                },
                
                closeFeedbackForm() {
                    this.showFeedback = false;
                    document.body.style.overflow = 'auto';
                },
                
                resetFeedbackForm() {
                    this.feedback = {
                        subject: '',
                        year: '',
                        missingPapers: [],
                        language: '',
                        description: '',
                        contact: ''
                    };
                },
                
                async submitFeedback() {
                    if (!this.canSubmitFeedback) return;
                    
                    // 1. æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                    this.showSuccessMessage = true;
                    this.successMessage = {
                        title: 'å ±å‘Šå·²æäº¤ï¼',
                        details: 'æ­£åœ¨æ‰“é–‹ GitHub é é¢...'
                    };
                    
                    // 2. ç»„ç»‡åé¦ˆå†…å®¹ä¸ºMarkdownæ ¼å¼
                    const issueBody = this.generateIssueBody();
                    
                    // 3. åˆ›å»ºGitHub Issues URL
                    const issueUrl = this.generateGitHubIssueUrl(issueBody);
                    
                    // 4. å»¶è¿Ÿåæ‰“å¼€GitHubé¡µé¢
                    setTimeout(() => {
                        window.open(issueUrl, '_blank', 'noopener,noreferrer');
                        
                        // 5. å…³é—­è¡¨å•å’Œæ¶ˆæ¯
                        setTimeout(() => {
                            this.showSuccessMessage = false;
                            this.closeFeedbackForm();
                            this.resetFeedbackForm();
                        }, 2000);
                    }, 1000);
                },
                
                generateIssueBody() {
                    return `
**ğŸ“‹ ç¼ºå¤±è©¦å·å ±å‘Š**

| é …ç›® | å…§å®¹ |
| :--- | :--- |
| **ç§‘ç›®** | ${this.feedback.subject} |
| **å¹´ä»½** | ${this.feedback.year} |
| **ç¼ºå¤±éƒ¨åˆ†** | ${this.feedback.missingPapers.join(', ')} |
| **èªè¨€ç‰ˆæœ¬** | ${this.feedback.language || 'æœªæŒ‡å®š'} |
| **è©³ç´°èªªæ˜** | ${this.feedback.description || 'ç„¡'} |
| **è¯ç¹«æ–¹å¼** | ${this.feedback.contact || 'æœªæä¾›'} |

**ğŸ“… æäº¤ä¿¡æ¯**
- æäº¤æ™‚é–“ï¼š${new Date().toLocaleString('zh-Hant')}
- æäº¤ä¾†æºï¼šDSE Resource Hub (å…¬é–‹æ¨¡å¼)

---
*æ­¤å ±å‘Šé€šé DSE è³‡æºåº«åé¥‹ç³»çµ±æäº¤*
                    `.trim();
                },
                
                generateGitHubIssueUrl(issueBody) {
                    const issueTitle = `[ç¼ºå¤±è©¦å·] ${this.feedback.subject} ${this.feedback.year}`;
                    const baseUrl = `https://github.com/${GITHUB_CONFIG.repo}/issues/new`;
                    
                    const params = new URLSearchParams({
                        'title': issueTitle,
                        'body': issueBody,
                        'labels': GITHUB_CONFIG.feedbackLabels
                    });
                    
                    return `${baseUrl}?${params.toString()}`;
                },
                
                // ============ å·¥å…·æ–¹æ³• ============
                showSuccess(title, details) {
                    this.successMessage = { title, details };
                    this.showSuccessMessage = true;
                    
                    setTimeout(() => {
                        this.showSuccessMessage = false;
                    }, 3000);
                },
                
                showError(message) {
                    this.successMessage = { title: 'éŒ¯èª¤', details: message };
                    this.showSuccessMessage = true;
                    
                    setTimeout(() => {
                        this.showSuccessMessage = false;
                    }, 3000);
                }
            },
            mounted() {
                console.log('DSE Resource Hub å·²è¼‰å…¥');
                console.log('GitHub å€‰åº«ï¼š', GITHUB_CONFIG.repo);
                console.log('ç•¶å‰æ¨¡å¼ï¼šå…¬é–‹ç€è¦½ï¼ˆç„¡éœ€ç™»éŒ„ï¼‰');
            }
        }).mount('#app')
    </script>
</body>
</html>
