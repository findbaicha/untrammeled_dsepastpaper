var xmcap=function(){"use strict";var i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};function t(t,o){function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}var h=function(){return(h=Object.assign||function(t){for(var o,e=1,i=arguments.length;e<i;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t}).apply(this,arguments)};var o="",e=("undefined"!=typeof window?window.location:{protocol:""}).protocol,n=/^http/.test(e)?e:"https",s=n+"//ops.test.ximalaya.com/captcha-web",a=n+"//mobile.ximalaya.com/captcha-web",o=a,c=function(t){o="uat"===t||"production"===t?a:s},l={get getCodeUrl(){return o+"/check/slide/get"},get checkCodeUrl(){return o+"/valid/slider"}},p="slider",m="rotation",u="pass",v=1,_=2,r=3,f=4,d=5,k=6,x="img.get",b="api.get",g="api.check",y={SUCCESS:"success",BEFORE_RENDER:"beforeRender",CLOSE:"close",REFRESH:"refresh",ERROR:"error",IMG_GET:"img_get",API_GET:"api_get",API_CHECK_START:"api_get_check",API_CHECK:"api_check"},E=5e3,S="\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019",w="\u52a0\u8f7d\u51fa\u9519\uff0c\u8bf7\u91cd\u8bd5",I="\u5931\u8d25\u8fc7\u591a\uff0c\u70b9\u51fb\u91cd\u8bd5",T="\u9a8c\u8bc1\u6210\u529f",L="\u8bf7\u5b8c\u6210\u5b89\u5168\u9a8c\u8bc1",D="\u62d6\u52a8\u6ed1\u5757\u4f7f\u62fc\u56fe\u91cd\u5408",B="\u62d6\u52a8\u6ed1\u5757\u65cb\u8f6c\u81f3\u6b63\u786e\u65b9\u5411",C="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",F="\u7f51\u7edc\u6296\u52a8\uff0c\u8bf7\u91cd\u8bd5";function M(t,o,e,i){var n;"undefined"!=typeof XMLHttpRequest&&((n=new XMLHttpRequest).open(o?"POST":"GET",t,!0),n.withCredentials=!0,n.setRequestHeader("Content-Type","application/json"),n.timeout=E,n.onreadystatechange=function(){if(4===n.readyState){var o=n.status;if(o)try{return void e(JSON.parse(n.response))}catch(t){o=t}i&&i(o)}},n.send(JSON.stringify(o)))}var $=(R.prototype.once=function(o,e){var i=this,n=function(t){e(t),i.off(o,n)};this.on(o,n)},R.prototype.on=function(t,o){~(this.evts[t]=this.evts[t]||[]).indexOf(o)||this.evts[t].push(o)},R.prototype.off=function(t,o){var e;o?~(e=this.evts[t].indexOf(o))||(this.evts[t][e]=void 0):delete this.evts[t]},R.prototype.emit=function(t,o){var e=this.evts[t];e&&(e.forEach(function(t){return t&&t(o)}),this.evts[t]=e.filter(Boolean))},R);function R(){this instanceof R&&(this.evts={})}function O(t){return!!t.touches}function G(t){var o=O(t)?t.touches[0].clientX:t.clientX,e=O(t)?t.touches[0].clientY:t.clientY;return{clientX:parseInt(""+o,10),clientY:parseInt(""+e,10)}}function H(){var t,o;if(!(W=W||sessionStorage.getItem("cap_id")||"")){o=+new Date,W=""+(t||"xm_")+o.toString(36)+Math.random().toString(36).substr(2,6);try{sessionStorage.setItem("cap_id",W)}catch(t){}}return W}var W="",A=function(t){W=t};function P(i,n){var s=0;return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var e=+new Date;n<=e-s&&(s=e,i.call.apply(i,function(){for(var t=0,o=0,e=arguments.length;o<e;o++)t+=arguments[o].length;for(var i=Array(t),n=0,o=0;o<e;o++)for(var s=arguments[o],a=0,c=s.length;a<c;a++,n++)i[n]=s[a];return i}([this],t)))}}function X(t){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e="(?:"+Object.keys(o).join("|")+")",i=RegExp(e),n=RegExp(e,"g");return t=null==t?"":""+t,i.test(t)?t.replace(n,function(t){return o[t]}):t}var z=0,K=0,Z=0,U="",N={get checkFailed(){return z},newCheckFailed:function(){return++z},checkFailedReset:function(){z=0},get apiFailed(){return K},newApiFailed:function(){return++K},apiFailedReset:function(){K=0},get imgFailed(){return Z},newImgFailed:function(){return++Z},imgFailedReset:function(){Z=0}},Y=(j.prototype.start=function(){var t,o=this,e=this.options,i=e.root,n=e.emit;(t=this.data.type)&&(U=t),this.renderWrapper(),this.cacheDom(),this.bindCommonEvent();var s=!1;this.waitForImgLoad(function(){s||(n(y.IMG_GET),s=!0,i.innerHTML=o.render(),o.loaded=!0,o.cacheDom(),o.bindEvent(),N.imgFailedReset())},function(t){s||(s=!0,o.renderWrapper(t?C:w),o.cacheDom(),t?o.handleApiError():o.handleImgError())}),this.timeout=setTimeout(function(){o.timeout=null,s||(s=!0,o.renderWrapper(F),o.cacheDom(),o.handleImgError())},E)},j.prototype.handleImgError=function(){var t=this.options.emit;2<N.newImgFailed()?(this.destroy(),t(y.SUCCESS,{code:r})):t(y.ERROR,{type:x})},j.prototype.handleApiError=function(){var t=this.options.emit;2<N.newApiFailed()&&(this.destroy(),t(y.SUCCESS,{code:_}))},j.prototype.destroy=function(t){this.unbindEvent(),this.unbindCommonEvent(),this.timeout&&(clearTimeout(this.timeout),this.timeout=null);for(var o=this.options,e=o.root,i=o.emit;e.childNodes.length;)e.removeChild(e.childNodes[0]);t&&i(y.CLOSE)},j.prototype.check=function(){var e=this;this.isFetching=!0;var t,o,i,n=this.options.emit;n(y.API_CHECK_START),t=this.data,o=function(o){e.isFetching=!1,N.apiFailedReset(),n(y.API_CHECK),"true"===o.result?(N.checkFailedReset(),e.showSuccess(),e.unbindEvent(),setTimeout(function(){var t;n(y.SUCCESS,{token:o.token,code:((t={})[p]=d,t[m]=k,t[e.data.type]||f)})})):N.newCheckFailed()%5?(e.showError(),setTimeout(function(){e.onRefresh(!0)},300)):(e.showError(!0),setTimeout(function(){n(y.ERROR,{data:o.msg,type:g})}))},i=function(t){e.isFetching=!1,2<=N.newApiFailed()?(e.destroy(),n(y.SUCCESS,{code:_})):(e.showLoadingError(t?C:F),setTimeout(function(){n(y.ERROR,{data:"network error",type:g})}))},M(l.checkCodeUrl,t,o,i)},j.prototype.onRefresh=function(t){this.isFetching||(this.refresh(),this.options.emit(y.REFRESH,"boolean"==typeof t?t:void 0))},j.prototype.refresh=function(){this.renderWrapper()},j.prototype.onClose=function(){this.destroy(!0)},j.prototype.onClickTip=function(){this.$blockMain&&/error/.test(this.$blockMain.className)&&this.onRefresh()},j.prototype.showLoading=function(){this.showTip(this.blockLoading,S)},j.prototype.showError=function(t){t?this.showTip(this.blockError,I):this.$blockMain.className=this.$blockMain.className+" "+this.blockError},j.prototype.showSuccess=function(){this.showTip(this.blockSuccess,T)},j.prototype.showLoadingError=function(t){this.showTip(this.blockError,t||w)},j.prototype.showTip=function(t,o){this.$blockMain.className=this.$blockMain.className+" "+t,this.$blockFoot.className=this.blockDn,this.$blockTip.innerText=o,this.$blockTip.className=this.blockTip},j.prototype.getDomById=function(t){return document.getElementById(t)},j.prototype.bindCommonEvent=function(){this.options.root.addEventListener("click",this.mainClick)},j.prototype.unbindCommonEvent=function(){this.options.root.removeEventListener("click",this.mainClick)},j.prototype.renderWrapper=function(t){var o=this.options,e=o.root,i=o.align,n="";U&&(n=" __xmca-container-"+U,"top"===i&&(n+=" __xmca-container-"+U+"-top")),e.innerHTML='<div class="__xmca-container'+n+" __xmca-"+(t?"error":"loading")+'" id="'+this.blockMain+'"><div class="__xmca-wrapper"><div class="__xmca-header"><div class="__xmca-title"></div><div class="__xmca-refresh" id="'+this.btnRefresh+'"></div><div class="__xmca-close" id="'+this.btnClose+'"></div></div><div class="__xmca-mask"></div></div><div id="'+this.blockTip+'" class="__xmca-tip">'+(t||S)+"</div></div>"},j.prototype.cacheDom=function(){this.$blockTip=this.getDomById(this.blockTip),this.$blockMain=this.getDomById(this.blockMain),this.$blockFoot=this.getDomById(this.blockFoot)},j);function j(t){var o=this;this.options=t,this.blockMain="__xmca-container",this.blockLoading="__xmca-loading",this.blockError="__xmca-error",this.blockSuccess="__xmca-success",this.btnRefresh="__xmca-refresh",this.btnClose="__xmca-close",this.blockTip="__xmca-tip",this.blockFoot="__xmca-foot",this.blockDn="__xmca-dn",this.isFetching=!1,this.data={},this.loaded=!1,this.mainClick=function(t){switch(t.target.id){case o.btnRefresh:o.onRefresh(t);break;case o.btnClose:o.onClose();break;case o.blockTip:o.onClickTip()}},this.data.bpId=t.bpId,this.data.sessionId=H()}var q,J=(t(V,q=Y),V.prototype.start=function(){q.prototype.start.call(this)},V.prototype.destroy=function(t){q.prototype.destroy.call(this,t)},V.prototype.bindEvent=function(){this.loaded&&(this.$blockFootBlock.addEventListener("mousedown",this.onMoveStart),this.$blockFootBlock.addEventListener("touchstart",this.onMoveStart,{passive:!1}),this.$imgBlock.addEventListener("mousedown",this.onMoveStart),this.$imgBlock.addEventListener("touchstart",this.onMoveStart,{passive:!1}),this.$doc.addEventListener("mousemove",this.onMove),this.$doc.addEventListener("touchmove",this.onMove,{passive:!1}),this.$blockFootBlock.addEventListener("touchmove",this.onMove,{passive:!1}),this.$doc.addEventListener("mouseup",this.onMoveEnd),this.$doc.addEventListener("touchend",this.onMoveEnd,{passive:!1}),this.$blockFootBlock.addEventListener("touchend",this.onMoveEnd,{passive:!1}))},V.prototype.unbindEvent=function(){this.loaded&&(this.$blockFootBlock.removeEventListener("mousedown",this.onMoveStart),this.$blockFootBlock.removeEventListener("touchstart",this.onMoveStart),this.$imgBlock.removeEventListener("mousedown",this.onMoveStart),this.$imgBlock.removeEventListener("touchstart",this.onMoveStart),this.$doc.removeEventListener("mousemove",this.onMove),this.$doc.removeEventListener("touchmove",this.onMove),this.$blockFootBlock.removeEventListener("touchmove",this.onMove),this.$doc.removeEventListener("mouseup",this.onMoveEnd),this.$doc.removeEventListener("touchend",this.onMoveEnd),this.$blockFootBlock.removeEventListener("touchend",this.onMoveEnd))},V.prototype.getImgLeft=function(t){return-12*this.ZOOM+(t+this.PAD_WIDTH)*(this.SLIDER_WIDTH-this.BLOCK_IMG_WIDTH+24*this.ZOOM)/(this.SLIDER_WIDTH-this.BLOCK_SIZE)},V.prototype.getSliderLeft=function(t){return parseInt(""+(this.getImgLeft(t)/this.ZOOM+44),10)},V.prototype.setSliderPosi=function(t){var o=t+"px",e=this.getImgLeft(t)+"px";this.$blockFootBlock.style.transform=this.$blockFootBlock.style.webkitTransform="translateX("+o+")",this.$imgBlock.style.transform=this.$imgBlock.style.webkitTransform="translateX("+e+")"},V.prototype.setLineWidth=function(t){this.$blockLine.style.width=t+this.BLOCK_SIZE-2+"px"},V.prototype.waitForImgLoad=function(t,o){var e=this,i=0,n=new Image,s=new Image;n.src=this.mainImgSrc,s.src=this.blockSrc,s.onload=n.onload=function(){2==++i&&(e.ZOOM=(e.SLIDER_WIDTH+2*e.PAD_WIDTH)/n.width,e.BLOCK_IMG_WIDTH=s.width*e.ZOOM,t())},s.onerror=n.onerror=function(){o()}},V.prototype.hideTipTxt=function(){this.$blockFootBlockText.style.display="none"},V.prototype.render=function(){var t=this.options,o=t.upToast,e=void 0===o?L:o,i=t.downToast,n=void 0===i?D:i;return'<div class="__xmca-container" id="'+this.blockMain+'"><div class="__xmca-wrapper"><div class="__xmca-header"><div class="__xmca-title">'+X(e)+'</div><div class="__xmca-refresh" id="'+this.btnRefresh+'"></div><div class="__xmca-close" id="'+this.btnClose+'"></div></div><div class="__xmca-body"><img class="__xmca-img-main" src="'+this.mainImgSrc+'"/><img class="__xmca-img-bl" style="-webkit-transform: translateX('+this.getImgLeft(0)+"px);transform: translateX("+this.getImgLeft(0)+'px);" src="'+this.blockSrc+'" id="'+this.imgBlock+'"/></div><div class="__xmca-foot" id="'+this.blockFoot+'"><div class="__xmca-line" id="'+this.blockLine+'"></div><div class="__xmca-block" class="__xmca-block" id="'+this.blockFootBlock+'"></div><div class="__xmca-txt" id="'+this.blockFootBlockText+'">'+X(n)+'</div></div></div><div id="'+this.blockTip+'" class="__xmca-tip '+this.blockDn+'"></div></div>'},V.prototype.cacheDom=function(){q.prototype.cacheDom.call(this),this.$blockFoot=this.getDomById(this.blockFoot),this.$blockFootBlock=this.getDomById(this.blockFootBlock),this.$blockLine=this.getDomById(this.blockLine),this.$imgBlock=this.getDomById(this.imgBlock),this.$blockFootBlockText=this.getDomById(this.blockFootBlockText)},V);function V(t,o,e){var d=q.call(this,t)||this;return d.mainImgSrc=o,d.blockSrc=e,d.blockFootBlock="__xmca-block",d.blockLine="__xmca-line",d.imgBlock="__xmca-img-bl",d.blockFootBlockText="__xmca-bl-txt",d.$doc=document,d.PAD_WIDTH=10,d.BLOCK_SIZE=40,d.SLIDER_WIDTH=0,d.BLOCK_IMG_WIDTH=0,d.ZOOM=1,d.disableTabSlide=function(t){O(t)&&window.ly&&"function"==typeof window.ly.invokeApp&&window.ly.invokeApp("util.tabSlide",{disabled:!0})},d.enableTabSlide=function(t){O(t)&&window.ly&&"function"==typeof window.ly.invokeApp&&window.ly.invokeApp("util.tabSlide",{disabled:!1})},d.onMoveStart=function(t){var o,e,i;d.hideTipTxt(),t.preventDefault(),d.isFetching||(d.disableTabSlide(t),e=(o=G(t)).clientX,i=o.clientY,d.isMoving=!0,d.data=h(h({},d.data),{captchaText:"",startX:e,startY:i,startTime:+new Date,evts:[]}))},d.onMove=function(t){var o,e,i,n,s,a,c,r;t.preventDefault(),d.isMoving&&(e=(o=d.data).evts,i=o.startX,s=(n=G(t)).clientX,a=n.clientY,r=(c=0<s-i?s-i:0)<d.SLIDER_WIDTH-d.BLOCK_SIZE?c:d.SLIDER_WIDTH-d.BLOCK_SIZE,d.setLineWidth(r),d.setSliderPosi(r),e.push({x:s,y:a,t:+new Date}))},d.onMoveEnd=function(t){if(d.isMoving){d.isMoving=!1;var o=d.data,e=o.evts,i=o.startX,n=o.startY;if(!e.length)return;var s=e[e.length-1],a=s.x-i,c=s.y-n;d.data.captchaText=d.getSliderLeft(a)+","+parseInt(""+c/d.ZOOM,10),delete d.data.evts,d.check(),d.enableTabSlide(t)}},d.SLIDER_WIDTH=t.root.offsetWidth-2*d.PAD_WIDTH,d.data.type=p,d}var Q,tt=(t(ot,Q=Y),ot.prototype.start=function(){Q.prototype.start.call(this)},ot.prototype.destroy=function(t){Q.prototype.destroy.call(this,t)},ot.prototype.bindEvent=function(){this.loaded&&(this.$blockFootBlock.addEventListener("mousedown",this.onMoveStart),this.$blockFootBlock.addEventListener("touchstart",this.onMoveStart,{passive:!1}),this.$imgBlock.addEventListener("mousedown",this.onMoveStart),this.$imgBlock.addEventListener("touchstart",this.onMoveStart,{passive:!1}),this.$doc.addEventListener("mousemove",this.onMove),this.$doc.addEventListener("touchmove",this.onMove,{passive:!1}),this.$blockFootBlock.addEventListener("touchmove",this.onMove,{passive:!1}),this.$doc.addEventListener("mouseup",this.onMoveEnd),this.$doc.addEventListener("touchend",this.onMoveEnd,{passive:!1}),this.$blockFootBlock.addEventListener("touchend",this.onMoveEnd,{passive:!1}))},ot.prototype.unbindEvent=function(){this.loaded&&(this.$blockFootBlock.removeEventListener("mousedown",this.onMoveStart),this.$blockFootBlock.removeEventListener("touchstart",this.onMoveStart),this.$imgBlock.removeEventListener("mousedown",this.onMoveStart),this.$imgBlock.removeEventListener("touchstart",this.onMoveStart),this.$doc.removeEventListener("mousemove",this.onMove),this.$doc.removeEventListener("touchmove",this.onMove),this.$blockFootBlock.removeEventListener("touchmove",this.onMove),this.$doc.removeEventListener("mouseup",this.onMoveEnd),this.$doc.removeEventListener("touchend",this.onMoveEnd),this.$blockFootBlock.removeEventListener("touchend",this.onMoveEnd))},ot.prototype.getImgRotation=function(t){return t/(this.SLIDER_WIDTH-this.BLOCK_SIZE)*360|0},ot.prototype.setSliderPosi=function(t){var o=t+"px",e=this.getImgRotation(t);this.rotation=360-e,this.$blockFootBlock.style.transform=this.$blockFootBlock.style.webkitTransform="translateX("+o+")",this.$imgBlock.style.transform=this.$imgBlock.style.webkitTransform="rotate("+e+"deg)"},ot.prototype.setLineWidth=function(t){this.$blockLine.style.width=t+this.BLOCK_SIZE-2+"px"},ot.prototype.waitForImgLoad=function(t,o){var e=new Image;e.src=this.imgSrc,e.onload=function(){t()},e.onerror=function(){o()}},ot.prototype.hideTipTxt=function(){this.$blockFootBlockText.style.display="none"},ot.prototype.render=function(){var t=this.options,o=t.align,e=t.upToast,i=void 0===e?L:e,n=t.downToast,s=void 0===n?B:n;return'<div class="__xmca-container __xmca-container-rotation'+(o?" __xmca-container-rotation-top":"")+'" id="'+this.blockMain+'"><div class="__xmca-wrapper"><div class="__xmca-header"><div class="__xmca-title">'+X(i)+'</div><div class="__xmca-refresh" id="'+this.btnRefresh+'"></div><div class="__xmca-close" id="'+this.btnClose+'"></div></div><div class="__xmca-body"><div class="__xmca-rotation-wrapper"><div class="__xmca-rotation"><img class="__xmca-img-main" src="'+this.imgSrc+'" id="'+this.imgBlock+'"/></div></div></div><div class="__xmca-foot" id="'+this.blockFoot+'"><div class="__xmca-line" id="'+this.blockLine+'"></div><div class="__xmca-block" class="__xmca-block" id="'+this.blockFootBlock+'"></div><div class="__xmca-txt" id="'+this.blockFootBlockText+'">'+X(s)+'</div></div></div><div id="'+this.blockTip+'" class="__xmca-tip '+this.blockDn+'"></div></div>'},ot.prototype.cacheDom=function(){Q.prototype.cacheDom.call(this),this.$blockFoot=this.getDomById(this.blockFoot),this.$blockFootBlock=this.getDomById(this.blockFootBlock),this.$blockLine=this.getDomById(this.blockLine),this.$imgBlock=this.getDomById(this.imgBlock),this.$blockFootBlockText=this.getDomById(this.blockFootBlockText)},ot);function ot(t,o){var d=Q.call(this,t)||this;return d.imgSrc=o,d.blockFootBlock="__xmca-block",d.blockLine="__xmca-line",d.imgBlock="__xmca-img-bl",d.blockFootBlockText="__xmca-bl-txt",d.$doc=document,d.PAD_WIDTH=12,d.BLOCK_SIZE=40,d.SLIDER_WIDTH=0,d.rotation=0,d.onMoveStart=function(t){var o,e,i;d.hideTipTxt(),t.preventDefault(),d.isFetching||(e=(o=G(t)).clientX,i=o.clientY,d.isMoving=!0,d.data=h(h({},d.data),{captchaText:"",startX:e,startY:i,startTime:+new Date,evts:[]}))},d.onMove=function(t){var o,e,i,n,s,a,c,r;t.preventDefault(),d.isMoving&&(e=(o=d.data).evts,i=o.startX,s=(n=G(t)).clientX,a=n.clientY,r=(c=0<s-i?s-i:0)<d.SLIDER_WIDTH-d.BLOCK_SIZE?c:d.SLIDER_WIDTH-d.BLOCK_SIZE,d.setLineWidth(r),d.setSliderPosi(r),e.push({x:s,y:a,t:+new Date}))},d.onMoveEnd=function(){if(d.isMoving){if(d.isMoving=!1,!d.data.evts.length)return;d.data.captchaText=""+d.rotation,delete d.data.evts,d.check()}},d.SLIDER_WIDTH=t.root.offsetWidth-2*d.PAD_WIDTH,d.data.type=m,d}var et,it=(t(nt,et=Y),nt.prototype.start=function(){et.prototype.start.call(this)},nt.prototype.destroy=function(t){et.prototype.destroy.call(this,t)},nt.prototype.waitForImgLoad=function(t,o){o(!0)},nt.prototype.bindEvent=function(){},nt.prototype.unbindEvent=function(){},nt.prototype.render=function(){return""},nt);function nt(t){return et.call(this,t)||this}var st={run:0,firstStart:+new Date,start:+new Date,apiGet:+new Date,imgGet:+new Date,apiCheckStart:+new Date,apiCheck:+new Date},at={metaId:10528,serviceId:"verifySucceed"},ct={metaId:10527,serviceId:"safetyVerify"};function rt(t,o){var e=window.xmrep&&window.xmrep.ubt;e&&e.event(t.metaId,t.serviceId,h(h({},o),{sessionId:H(),sdk:"2.0.7"}))}function dt(t){var o={};for(var e in t)(0<t[e]||"status"===e)&&(o[e]=t[e]);return o}var ht=function(){st.run=0,st.firstStart=+new Date},lt=function(){st.run++,st.start=+new Date},pt=function(){st.apiGet>st.start||(st.apiGet=+new Date)},mt=function(){st.imgGet>st.start||(st.imgGet=+new Date)},ut=function(){st.apiCheckStart>st.start||(st.apiCheckStart=+new Date)},vt=function(){st.apiCheck>st.start||(st.apiCheck=+new Date,rt(ct,dt({apiGet:st.apiGet-st.start,imgGet:st.imgGet-st.apiGet,action:st.imgGet>st.apiGet?st.apiCheckStart-st.imgGet:0,apiCheck:st.apiCheck-st.apiCheckStart,all:st.apiCheck-st.start,status:1})))},_t=function(t){var o=+new Date;rt(ct,dt({apiGet:t===b?o-st.start:st.apiGet-st.start,imgGet:t===x?o-st.apiGet:st.imgGet-st.apiGet,action:st.imgGet>st.apiGet?st.apiCheckStart-st.imgGet:0,apiCheck:t===g?o-st.apiCheckStart:st.apiCheck-st.apiCheckStart,all:o-st.start,status:0}))},ft=function(){rt(at,{status:0,run:st.run,alltime:new Date-st.firstStart})},kt=function(t){rt(at,{status:t.code,run:st.run,alltime:new Date-st.firstStart})};var xt;function bt(t){var o=xt.call(this)||this;if(!(o instanceof bt))return new bt(t);var e=t.sessionId,i=t.env;return e&&A(e),i&&c(i),o.instanceOptions=h(h({},t),{emit:o.emit.bind(o)}),o.startXlog(),o.start=P(o.start,500).bind(o),o.on(y.REFRESH,function(){o.start()}),o.start(),o}return function(t,o){void 0===o&&(o={});var e,i,n=o.insertAt;t&&"undefined"!=typeof document&&(e=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("style")).type="text/css","top"===n&&e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)))}('.__xmca-dn{visibility:hidden}.__xmca-container{position:relative;user-select:none;left:-10px}.__xmca-container-rotation-top{margin-top:20%}.__xmca-wrapper{box-sizing:content-box;position:absolute;bottom:0;left:0;width:100%;z-index:1000;padding:10px;background:#fff;border-radius:4px}.__xmca-mask{background:#eee;margin-bottom:50px;padding-bottom:50%;height:0}.__xmca-container-rotation .__xmca-mask{padding-bottom:70%}.__xmca-header{position:relative;font-size:16px}.__xmca-title{padding-left:10px;color:#999;height:40px;line-height:40px;margin-top:-10px}.__xmca-close,.__xmca-refresh{position:absolute;top:7px;cursor:pointer;background-size:50%}.__xmca-close{right:0;background-position:-27px -53px}.__xmca-close,.__xmca-refresh{background-image:url(//s1.xmcdn.com/yx/fe-captcha/last/dist/icons.png?v=2.0.10);background-size:106px 79px;width:26px;height:26px}.__xmca-refresh{right:36px;background-position:-53px -53px}.__xmca-body{background:#eee;position:relative;margin-bottom:10px;padding-bottom:50%;height:0;overflow:hidden}.__xmca-container-rotation .__xmca-body{padding-bottom:70%}.__xmca-rotation-wrapper{width:70%;margin:0 auto;padding:10px;box-sizing:border-box}.__xmca-rotation{border-radius:50%;font-size:0;overflow:hidden}.__xmca-img-main{display:block;width:100%;height:auto;z-index:1}.__xmca-img-bl{top:0;left:0;height:100%;width:auto;z-index:10}.__xmca-img-bl,.__xmca-point{cursor:pointer;position:absolute}.__xmca-point{width:26px;height:33px;background-image:url(//s1.xmcdn.com/yx/fe-captcha/last/dist/icons.png?v=2.0.10);background-position:0 0;background-size:106px 79px;width:53px;height:53px}.__xmca-point-1{background-position:0 -387px}.__xmca-point-2{background-position:0 -243px}.__xmca-point-3{background-position:0 -351px}.__xmca-point-4{background-position:0 -315px}.__xmca-point-5{background-position:0 -279px}.__xmca-foot,.__xmca-tip{position:relative;margin:0 10px;line-height:38px;height:38px;text-align:center;border-radius:20px;font-size:16px;border:1px solid transparent;box-sizing:content-box}.__xmca-foot{background:#f0f0f0;box-shadow:inset 0 0 4px 0 rgba(0,0,0,.1)}.__xmca-tip{left:10px;top:-10px;z-index:10001}.__xmca-loading .__xmca-tip,.__xmca-success .__xmca-tip{background:#e1f0d8;color:#59a208}.__xmca-loading .__xmca-tip:before{content:"";display:inline-block;position:absolute;left:20%;top:6px;background-image:url(//s1.xmcdn.com/yx/fe-captcha/last/dist/icons.png?v=2.0.10);background-position:0 -53px;background-size:106px 79px;animation:__xmca-loading .6s infinite;width:27px;height:26px}.__xmca-error .__xmca-tip{color:#e55768;background:#ffe5e5;text-decoration:underline;cursor:pointer}.__xmca-line{height:40px;width:0;border-radius:20px;background:#e4f0fe}.__xmca-error .__xmca-line{background:#ffe5e5}.__xmca-block{position:absolute;top:-6px;left:-6px;z-index:5;cursor:pointer;background-position:0 0}.__xmca-block,.__xmca-error .__xmca-block{background-image:url(//s1.xmcdn.com/yx/fe-captcha/last/dist/icons.png?v=2.0.10);background-size:106px 79px;width:53px;height:53px}.__xmca-error .__xmca-block{background-position:-53px 0}.__xmca-click,.__xmca-txt{position:absolute;top:0;left:0;width:100%;line-height:38px;font-size:14px;color:#999;letter-spacing:0}@keyframes __xmca-loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}'),t(bt,xt=$),bt.prototype.render=function(t){t&&(this.instanceOptions.root=t),this.renderFunc&&(this.renderFunc(),this.renderFunc=void 0)},bt.prototype.destroy=function(){this.instance&&this.instance.destroy(),this.instance=void 0},bt.prototype.start=function(){var t,o,e,i,n=this,s=this.instanceOptions,a=s.bpId,c=s.uid,r=s.bzType,d=s.ext;i=h(h({bpId:a,uid:c,bz_type:r},void 0===d?{}:d),{sessionId:H()}),t=Object.keys(i).filter(function(t){return i[t]}).map(function(t){return t+"="+i[t]}).join("&"),o=function(t){if(n.emit(y.API_GET),N.apiFailedReset(),"true"===t.result){switch(n.destroy(),s.upToast=t.upToast||void 0,s.downToast=t.downToast||void 0,t.type){case m:n.renderFunc=function(){n.instance=new tt(s,t.data.rotationUrl),n.instance.start()};break;case p:n.renderFunc=function(){n.instance=new J(s,t.data.bgUrl,t.data.fgUrl),n.instance.start()};break;case u:return void n.emit(y.SUCCESS,{token:t.token,code:f});default:return void n.emit(y.SUCCESS,{code:v})}s.root?n.render():n.emit(y.BEFORE_RENDER,t.type)}else n.emit(y.ERROR,{type:b,data:t.msg})},e=function(t){if(s.root)n.instance=new it(s),n.instance.start();else{if(2<N.newApiFailed())return n.destroy(),void n.emit(y.SUCCESS,{code:_});n.start()}n.emit(y.ERROR,{type:b,data:t})},M(l.getCodeUrl+"?"+t,"",o,e)},bt.prototype.startXlog=function(){ht(),lt(),this.on(y.API_GET,function(){pt()}),this.on(y.IMG_GET,function(){mt()}),this.on(y.API_CHECK_START,function(){ut()}),this.on(y.API_CHECK,function(){vt()}),this.on(y.CLOSE,function(){ft()}),this.on(y.SUCCESS,function(t){kt(t)}),this.on(y.ERROR,function(t){_t(t.type)}),this.on(y.REFRESH,function(){lt()})},bt}();
